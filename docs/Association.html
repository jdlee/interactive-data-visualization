<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Interactive data visualization</title>
  <meta name="description" content="A book of ggplot examples">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Interactive data visualization" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/Minard_timeline_map.png" />
  <meta property="og:description" content="A book of ggplot examples" />
  <meta name="github-repo" content="jdlee/ggplot-examples" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Interactive data visualization" />
  
  <meta name="twitter:description" content="A book of ggplot examples" />
  <meta name="twitter:image" content="images/Minard_timeline_map.png" />

<meta name="author" content="John D. Lee">


<meta name="date" content="2018-05-29">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="Principles.html">
<link rel="next" href="Distribution.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding/datatables.js"></script>
<link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider/jquery.nouislider.min.js"></script>
<link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize/selectize.min.js"></script>
<script src="libs/d3/d3.min.js"></script>
<script src="libs/d3-lasso/d3-lasso.min.js"></script>
<link href="libs/ggiraph/styles.css" rel="stylesheet" />
<script src="libs/ggiraph/ggiraph_utils.js"></script>
<script src="libs/ggiraph/ggiraph_over_effect.js"></script>
<script src="libs/ggiraph/ggiraph_zoom.js"></script>
<script src="libs/ggiraph/ggiraph_tooltip.js"></script>
<script src="libs/ggiraph/ggiraph_selector.js"></script>
<script src="libs/ggiraph-binding/ggiraph.js"></script>
<script src="libs/svg_1/scripts_svg_1.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Interactive Data Visualization in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-read-this-book"><i class="fa fa-check"></i>Why read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-the-book"><i class="fa fa-check"></i>Structure of the book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="Introduction.html"><a href="Introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction: Purposes, questions, and audiences</a><ul>
<li class="chapter" data-level="1.1" data-path="Introduction.html"><a href="Introduction.html#seeing-meaning-rather-than-numbers"><i class="fa fa-check"></i><b>1.1</b> Seeing meaning rather than numbers</a></li>
<li class="chapter" data-level="1.2" data-path="Introduction.html"><a href="Introduction.html#seeing-more-than-summary-statistics"><i class="fa fa-check"></i><b>1.2</b> Seeing more than summary statistics</a></li>
<li class="chapter" data-level="1.3" data-path="Introduction.html"><a href="Introduction.html#purpose-and-audience-of-visualizations"><i class="fa fa-check"></i><b>1.3</b> Purpose and audience of visualizations</a></li>
<li class="chapter" data-level="1.4" data-path="Introduction.html"><a href="Introduction.html#what-question-to-answer"><i class="fa fa-check"></i><b>1.4</b> What question to answer?</a></li>
<li class="chapter" data-level="1.5" data-path="Introduction.html"><a href="Introduction.html#storytelling-with-graphics"><i class="fa fa-check"></i><b>1.5</b> Storytelling with graphics</a></li>
<li class="chapter" data-level="1.6" data-path="Introduction.html"><a href="Introduction.html#data"><i class="fa fa-check"></i><b>1.6</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Principles.html"><a href="Principles.html"><i class="fa fa-check"></i><b>2</b> Visualization types and principles</a><ul>
<li class="chapter" data-level="2.1" data-path="Principles.html"><a href="Principles.html#pairing-questions-and-graph-types"><i class="fa fa-check"></i><b>2.1</b> Pairing questions and graph types</a></li>
<li class="chapter" data-level="2.2" data-path="Principles.html"><a href="Principles.html#percpetual-processes-to-be-supported-comparison-detection-pattern-identification"><i class="fa fa-check"></i><b>2.2</b> Percpetual processes to be supported: Comparison, Detection, Pattern identification</a><ul>
<li class="chapter" data-level="2.2.1" data-path="Principles.html"><a href="Principles.html#comparison"><i class="fa fa-check"></i><b>2.2.1</b> Comparison</a></li>
<li class="chapter" data-level="2.2.2" data-path="Principles.html"><a href="Principles.html#detection"><i class="fa fa-check"></i><b>2.2.2</b> Detection</a></li>
<li class="chapter" data-level="2.2.3" data-path="Principles.html"><a href="Principles.html#pattern-identification"><i class="fa fa-check"></i><b>2.2.3</b> Pattern identification</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Principles.html"><a href="Principles.html#principles-from-general-to-specific"><i class="fa fa-check"></i><b>2.3</b> Principles from general to specific</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Principles.html"><a href="Principles.html#identify-audience-story-and-key-relationships-few"><i class="fa fa-check"></i><b>2.3.1</b> Identify audience, story, and key relationships (Few)</a></li>
<li class="chapter" data-level="2.3.2" data-path="Principles.html"><a href="Principles.html#focus-attention-and-organize-reading"><i class="fa fa-check"></i><b>2.3.2</b> Focus attention and organize reading</a></li>
<li class="chapter" data-level="2.3.3" data-path="Principles.html"><a href="Principles.html#annotate-to-show-cause-and-explain-why"><i class="fa fa-check"></i><b>2.3.3</b> Annotate to show cause and explain why</a></li>
<li class="chapter" data-level="2.3.4" data-path="Principles.html"><a href="Principles.html#concrete-details-engage-and-are-memorable"><i class="fa fa-check"></i><b>2.3.4</b> Concrete details engage and are memorable</a></li>
<li class="chapter" data-level="2.3.5" data-path="Principles.html"><a href="Principles.html#enable-comparisons-and-put-data-in-context"><i class="fa fa-check"></i><b>2.3.5</b> Enable comparisons and put data in context</a></li>
<li class="chapter" data-level="2.3.6" data-path="Principles.html"><a href="Principles.html#map-types-of-variables-to-graph-features"><i class="fa fa-check"></i><b>2.3.6</b> Map types of variables to graph features</a></li>
<li class="chapter" data-level="2.3.7" data-path="Principles.html"><a href="Principles.html#ensure-proximity-compatibility"><i class="fa fa-check"></i><b>2.3.7</b> Ensure proximity compatibility</a></li>
<li class="chapter" data-level="2.3.8" data-path="Principles.html"><a href="Principles.html#legibility-and-consistency"><i class="fa fa-check"></i><b>2.3.8</b> Legibility and consistency</a></li>
<li class="chapter" data-level="2.3.9" data-path="Principles.html"><a href="Principles.html#maximize-dataink-ratio"><i class="fa fa-check"></i><b>2.3.9</b> Maximize data/ink ratio</a></li>
<li class="chapter" data-level="2.3.10" data-path="Principles.html"><a href="Principles.html#manage-clutter-with-grouping-and-layering"><i class="fa fa-check"></i><b>2.3.10</b> Manage clutter with grouping and layering</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Principles.html"><a href="Principles.html#overview-of-examples"><i class="fa fa-check"></i><b>2.4</b> Overview of examples</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Association.html"><a href="Association.html"><i class="fa fa-check"></i><b>3</b> Association–scatterplots</a><ul>
<li class="chapter" data-level="3.1" data-path="Association.html"><a href="Association.html#basic-elements-of-the-grammar-of-graphics"><i class="fa fa-check"></i><b>3.1</b> Basic elements of the grammar of graphics</a></li>
<li class="chapter" data-level="3.2" data-path="Association.html"><a href="Association.html#simple-scatterplot"><i class="fa fa-check"></i><b>3.2</b> Simple scatterplot</a></li>
<li class="chapter" data-level="3.3" data-path="Association.html"><a href="Association.html#scatterplot-with-additional-mappings"><i class="fa fa-check"></i><b>3.3</b> Scatterplot with additional mappings</a></li>
<li class="chapter" data-level="3.4" data-path="Association.html"><a href="Association.html#scatterplot-with-linear-and-loess-fit"><i class="fa fa-check"></i><b>3.4</b> Scatterplot with linear and loess fit</a></li>
<li class="chapter" data-level="3.5" data-path="Association.html"><a href="Association.html#global-and-local-regression"><i class="fa fa-check"></i><b>3.5</b> Global and local regression</a></li>
<li class="chapter" data-level="3.6" data-path="Association.html"><a href="Association.html#quantile-regression-and-other-functional-relationships"><i class="fa fa-check"></i><b>3.6</b> Quantile regression and other functional relationships</a></li>
<li class="chapter" data-level="3.7" data-path="Association.html"><a href="Association.html#scatterplot-with-regression-equation-and-marginal-distributions"><i class="fa fa-check"></i><b>3.7</b> Scatterplot with regression equation and marginal distributions</a></li>
<li class="chapter" data-level="3.8" data-path="Association.html"><a href="Association.html#categorical-scatterplot"><i class="fa fa-check"></i><b>3.8</b> Categorical scatterplot</a></li>
<li class="chapter" data-level="3.9" data-path="Association.html"><a href="Association.html#table-lens"><i class="fa fa-check"></i><b>3.9</b> Table lens</a></li>
<li class="chapter" data-level="3.10" data-path="Association.html"><a href="Association.html#scatterplot-with-overplotting-mitigation"><i class="fa fa-check"></i><b>3.10</b> Scatterplot with overplotting mitigation</a></li>
<li class="chapter" data-level="3.11" data-path="Association.html"><a href="Association.html#a-matrix-of-scatterplots"><i class="fa fa-check"></i><b>3.11</b> A matrix of scatterplots</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Distribution.html"><a href="Distribution.html"><i class="fa fa-check"></i><b>4</b> Distribution–histograms and density plots</a><ul>
<li class="chapter" data-level="4.1" data-path="Distribution.html"><a href="Distribution.html#histograms-and-bin-choice"><i class="fa fa-check"></i><b>4.1</b> Histograms and bin choice</a></li>
<li class="chapter" data-level="4.2" data-path="Distribution.html"><a href="Distribution.html#histogram-percentage-rather-than-count"><i class="fa fa-check"></i><b>4.2</b> Histogram percentage rather than count</a></li>
<li class="chapter" data-level="4.3" data-path="Distribution.html"><a href="Distribution.html#histogram-density-overlay-and-normal-overlay"><i class="fa fa-check"></i><b>4.3</b> Histogram, density overlay, and normal overlay</a></li>
<li class="chapter" data-level="4.4" data-path="Distribution.html"><a href="Distribution.html#cummulative-density"><i class="fa fa-check"></i><b>4.4</b> Cummulative density</a></li>
<li class="chapter" data-level="4.5" data-path="Distribution.html"><a href="Distribution.html#quantile-quantle-plot"><i class="fa fa-check"></i><b>4.5</b> Quantile-quantle plot</a></li>
<li class="chapter" data-level="4.6" data-path="Distribution.html"><a href="Distribution.html#cummulative-density-1"><i class="fa fa-check"></i><b>4.6</b> Cummulative density</a></li>
<li class="chapter" data-level="4.7" data-path="Distribution.html"><a href="Distribution.html#distribution-2-d-distribution-and-overplotting-revisited"><i class="fa fa-check"></i><b>4.7</b> Distribution: 2-D distribution and overplotting revisited</a></li>
<li class="chapter" data-level="4.8" data-path="Distribution.html"><a href="Distribution.html#histogram-with-density-and-median-reference-line"><i class="fa fa-check"></i><b>4.8</b> Histogram with density and median reference line</a></li>
<li class="chapter" data-level="4.9" data-path="Distribution.html"><a href="Distribution.html#ridge-plotan-array-of-density-plots"><i class="fa fa-check"></i><b>4.9</b> Ridge plot–An array of density plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Comparison.html"><a href="Comparison.html"><i class="fa fa-check"></i><b>5</b> Comparison–barchart and boxplots</a><ul>
<li class="chapter" data-level="5.1" data-path="Comparison.html"><a href="Comparison.html#graph-considerations-for-communication-aggregation-abstraction-complexity"><i class="fa fa-check"></i><b>5.1</b> Graph considerations for communication: aggregation, abstraction, complexity</a><ul>
<li class="chapter" data-level="5.1.1" data-path="Comparison.html"><a href="Comparison.html#simple-bar-chart"><i class="fa fa-check"></i><b>5.1.1</b> Simple bar chart</a></li>
<li class="chapter" data-level="5.1.2" data-path="Comparison.html"><a href="Comparison.html#bar-chart-with-error-bars"><i class="fa fa-check"></i><b>5.1.2</b> Bar chart with error bars</a></li>
<li class="chapter" data-level="5.1.3" data-path="Comparison.html"><a href="Comparison.html#dotplot-and-offset-range-plot"><i class="fa fa-check"></i><b>5.1.3</b> dotplot and offset range plot</a></li>
<li class="chapter" data-level="5.1.4" data-path="Comparison.html"><a href="Comparison.html#statistical-significance-in-context"><i class="fa fa-check"></i><b>5.1.4</b> Statistical significance in context</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Comparison.html"><a href="Comparison.html#comparing-distributions-box-violyn-and-sina-plot"><i class="fa fa-check"></i><b>5.2</b> Comparing distributions, box, violyn, and sina plot</a><ul>
<li class="chapter" data-level="5.2.1" data-path="Comparison.html"><a href="Comparison.html#compare-empirical-and-theoretical-distribution"><i class="fa fa-check"></i><b>5.2.1</b> Compare empirical and theoretical distribution</a></li>
<li class="chapter" data-level="5.2.2" data-path="Comparison.html"><a href="Comparison.html#tufte-inspired-minimal-bar-chart"><i class="fa fa-check"></i><b>5.2.2</b> Tufte-inspired minimal bar chart</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Comparison.html"><a href="Comparison.html#comparing-across-many-variables"><i class="fa fa-check"></i><b>5.3</b> Comparing across many variables</a><ul>
<li class="chapter" data-level="5.3.1" data-path="Comparison.html"><a href="Comparison.html#dot-plots-and-reordering"><i class="fa fa-check"></i><b>5.3.1</b> Dot plots and reordering</a></li>
<li class="chapter" data-level="5.3.2" data-path="Comparison.html"><a href="Comparison.html#point-range-on-x-and-y"><i class="fa fa-check"></i><b>5.3.2</b> Point range on x and y</a></li>
<li class="chapter" data-level="5.3.3" data-path="Comparison.html"><a href="Comparison.html#tufte-boxplot-for-many-variables"><i class="fa fa-check"></i><b>5.3.3</b> Tufte boxplot for many variables</a></li>
<li class="chapter" data-level="5.3.4" data-path="Comparison.html"><a href="Comparison.html#tufte-slopegraph"><i class="fa fa-check"></i><b>5.3.4</b> Tufte-inspired slope graphs</a></li>
<li class="chapter" data-level="5.3.5" data-path="Comparison.html"><a href="Comparison.html#parallel-coordinate-plot-with-similar-items-highlighted"><i class="fa fa-check"></i><b>5.3.5</b> Parallel coordinate plot with similar items highlighted</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="Comparison.html"><a href="Comparison.html#gliphs-chernof-face-and-radar-plots"><i class="fa fa-check"></i><b>5.4</b> Gliphs: Chernof face and radar plots</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Proportion.html"><a href="Proportion.html"><i class="fa fa-check"></i><b>6</b> Proportion–Pie charts and pareto plots</a><ul>
<li class="chapter" data-level="6.1" data-path="Proportion.html"><a href="Proportion.html#pie-and-bar-chart"><i class="fa fa-check"></i><b>6.1</b> Pie and bar chart</a></li>
<li class="chapter" data-level="6.2" data-path="Proportion.html"><a href="Proportion.html#pareto-plot-whole-part-and-and-ranking"><i class="fa fa-check"></i><b>6.2</b> Pareto plot: Whole part and and ranking</a></li>
<li class="chapter" data-level="6.3" data-path="Proportion.html"><a href="Proportion.html#stacked-bar-chart"><i class="fa fa-check"></i><b>6.3</b> Stacked bar chart</a></li>
<li class="chapter" data-level="6.4" data-path="Proportion.html"><a href="Proportion.html#faceted-bar-chart-with-overall-reference-distribution"><i class="fa fa-check"></i><b>6.4</b> Faceted Bar chart with overall reference distribution</a></li>
<li class="chapter" data-level="6.5" data-path="Proportion.html"><a href="Proportion.html#rose-or-coxcomb-plots"><i class="fa fa-check"></i><b>6.5</b> Rose or Coxcomb plots</a></li>
<li class="chapter" data-level="6.6" data-path="Proportion.html"><a href="Proportion.html#stacked-dodged-and-opposed-bar-chart"><i class="fa fa-check"></i><b>6.6</b> Stacked, dodged and opposed bar chart</a></li>
<li class="chapter" data-level="6.7" data-path="Proportion.html"><a href="Proportion.html#likert-scale-plot"><i class="fa fa-check"></i><b>6.7</b> Likert scale plot</a></li>
<li class="chapter" data-level="6.8" data-path="Proportion.html"><a href="Proportion.html#treemaps-for-whole-part-of-hierarchy"><i class="fa fa-check"></i><b>6.8</b> Treemaps for whole-part of hierarchy</a></li>
<li class="chapter" data-level="6.9" data-path="Proportion.html"><a href="Proportion.html#circle-packing"><i class="fa fa-check"></i><b>6.9</b> Circle packing</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Fluctuation.html"><a href="Fluctuation.html"><i class="fa fa-check"></i><b>7</b> Fluctuation–timelines</a><ul>
<li class="chapter" data-level="7.1" data-path="Fluctuation.html"><a href="Fluctuation.html#multiple-time-series"><i class="fa fa-check"></i><b>7.1</b> Multiple time series</a></li>
<li class="chapter" data-level="7.2" data-path="Fluctuation.html"><a href="Fluctuation.html#time-series-with-reference-line"><i class="fa fa-check"></i><b>7.2</b> Time series with reference line</a></li>
<li class="chapter" data-level="7.3" data-path="Fluctuation.html"><a href="Fluctuation.html#cycle-plot"><i class="fa fa-check"></i><b>7.3</b> Cycle plot</a></li>
<li class="chapter" data-level="7.4" data-path="Fluctuation.html"><a href="Fluctuation.html#time-series-with-lines-labeled"><i class="fa fa-check"></i><b>7.4</b> Time series with lines labeled</a></li>
<li class="chapter" data-level="7.5" data-path="Fluctuation.html"><a href="Fluctuation.html#faceted-zoom"><i class="fa fa-check"></i><b>7.5</b> Faceted zoom</a></li>
<li class="chapter" data-level="7.6" data-path="Fluctuation.html"><a href="Fluctuation.html#ridge-plot"><i class="fa fa-check"></i><b>7.6</b> Ridge plot</a></li>
<li class="chapter" data-level="7.7" data-path="Fluctuation.html"><a href="Fluctuation.html#stacked-area-and-line-graphs"><i class="fa fa-check"></i><b>7.7</b> Stacked area and line graphs</a></li>
<li class="chapter" data-level="7.8" data-path="Fluctuation.html"><a href="Fluctuation.html#temporal-heatmap"><i class="fa fa-check"></i><b>7.8</b> Temporal heatmap</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Connection.html"><a href="Connection.html"><i class="fa fa-check"></i><b>8</b> Connection–maps and network plots</a><ul>
<li class="chapter" data-level="8.1" data-path="Connection.html"><a href="Connection.html#maps"><i class="fa fa-check"></i><b>8.1</b> Maps</a><ul>
<li class="chapter" data-level="8.1.1" data-path="Connection.html"><a href="Connection.html#choropleth"><i class="fa fa-check"></i><b>8.1.1</b> Choropleth</a></li>
<li class="chapter" data-level="8.1.2" data-path="Connection.html"><a href="Connection.html#county-map"><i class="fa fa-check"></i><b>8.1.2</b> County map</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Connection.html"><a href="Connection.html#us-county-small-multiples"><i class="fa fa-check"></i><b>8.2</b> US county small multiples</a></li>
<li class="chapter" data-level="8.3" data-path="Connection.html"><a href="Connection.html#world-migration"><i class="fa fa-check"></i><b>8.3</b> World migration</a></li>
<li class="chapter" data-level="8.4" data-path="Connection.html"><a href="Connection.html#networks"><i class="fa fa-check"></i><b>8.4</b> Networks</a><ul>
<li class="chapter" data-level="8.4.1" data-path="Connection.html"><a href="Connection.html#world-migration-network"><i class="fa fa-check"></i><b>8.4.1</b> World migration network</a></li>
<li class="chapter" data-level="8.4.2" data-path="Connection.html"><a href="Connection.html#hierarchy"><i class="fa fa-check"></i><b>8.4.2</b> Hierarchy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Tables.html"><a href="Tables.html"><i class="fa fa-check"></i><b>9</b> Graphical tables–interactive tables, highlights, and sparklines</a><ul>
<li class="chapter" data-level="9.1" data-path="Tables.html"><a href="Tables.html#heatmap-table"><i class="fa fa-check"></i><b>9.1</b> Heatmap table</a></li>
<li class="chapter" data-level="9.2" data-path="Tables.html"><a href="Tables.html#table-lens-with-a-integrated-bar"><i class="fa fa-check"></i><b>9.2</b> Table lens with a integrated bar</a></li>
<li class="chapter" data-level="9.3" data-path="Tables.html"><a href="Tables.html#sparkline"><i class="fa fa-check"></i><b>9.3</b> Sparkline</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Polishing.html"><a href="Polishing.html"><i class="fa fa-check"></i><b>10</b> Highlighting, annotating, and polishing graphs</a><ul>
<li class="chapter" data-level="10.1" data-path="Polishing.html"><a href="Polishing.html#highlighting-datapoints-to-make-a-point"><i class="fa fa-check"></i><b>10.1</b> Highlighting datapoints to make a point</a></li>
<li class="chapter" data-level="10.2" data-path="Polishing.html"><a href="Polishing.html#labeling-and-annotation"><i class="fa fa-check"></i><b>10.2</b> Labeling and annotation</a><ul>
<li class="chapter" data-level="10.2.1" data-path="Polishing.html"><a href="Polishing.html#annotating-data"><i class="fa fa-check"></i><b>10.2.1</b> Annotating data</a></li>
<li class="chapter" data-level="10.2.2" data-path="Polishing.html"><a href="Polishing.html#annotating-points-and-select-points"><i class="fa fa-check"></i><b>10.2.2</b> Annotating points and select points</a></li>
<li class="chapter" data-level="10.2.3" data-path="Polishing.html"><a href="Polishing.html#labels-on-lines"><i class="fa fa-check"></i><b>10.2.3</b> Labels on lines</a></li>
<li class="chapter" data-level="10.2.4" data-path="Polishing.html"><a href="Polishing.html#meaningful-symbols"><i class="fa fa-check"></i><b>10.2.4</b> Meaningful symbols</a></li>
<li class="chapter" data-level="10.2.5" data-path="Polishing.html"><a href="Polishing.html#AddingRemovingLabels"><i class="fa fa-check"></i><b>10.2.5</b> Adding and removing labels: title, axis labels, facet labels, and legends</a></li>
<li class="chapter" data-level="10.2.6" data-path="Polishing.html"><a href="Polishing.html#remove-and-position-one-or-more-legends"><i class="fa fa-check"></i><b>10.2.6</b> Remove and position one or more legends</a></li>
<li class="chapter" data-level="10.2.7" data-path="Polishing.html"><a href="Polishing.html#setting-limits-on-axis-and-position-of-graph"><i class="fa fa-check"></i><b>10.2.7</b> Setting limits on axis and position of graph</a></li>
<li class="chapter" data-level="10.2.8" data-path="Polishing.html"><a href="Polishing.html#adjust-margin-between-points-and-edge-of-plot-area"><i class="fa fa-check"></i><b>10.2.8</b> Adjust margin between points and edge of plot area</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="Polishing.html"><a href="Polishing.html#color"><i class="fa fa-check"></i><b>10.3</b> Color</a><ul>
<li class="chapter" data-level="10.3.1" data-path="Polishing.html"><a href="Polishing.html#resources-to-explain-the-basis-form-color-choice"><i class="fa fa-check"></i><b>10.3.1</b> Resources to explain the basis form color choice</a></li>
<li class="chapter" data-level="10.3.2" data-path="Polishing.html"><a href="Polishing.html#large-and-small-area-colors"><i class="fa fa-check"></i><b>10.3.2</b> Large and small area colors</a></li>
<li class="chapter" data-level="10.3.3" data-path="Polishing.html"><a href="Polishing.html#color-for-large-and-small-areas"><i class="fa fa-check"></i><b>10.3.3</b> Color for large and small areas</a></li>
<li class="chapter" data-level="10.3.4" data-path="Polishing.html"><a href="Polishing.html#continuous-color-scales"><i class="fa fa-check"></i><b>10.3.4</b> Continuous color scales</a></li>
<li class="chapter" data-level="10.3.5" data-path="Polishing.html"><a href="Polishing.html#discrete-color-mappings"><i class="fa fa-check"></i><b>10.3.5</b> Discrete color mappings</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="Polishing.html"><a href="Polishing.html#themes-and-theme-options"><i class="fa fa-check"></i><b>10.4</b> Themes and theme options</a><ul>
<li class="chapter" data-level="10.4.1" data-path="Polishing.html"><a href="Polishing.html#remove-chart-details"><i class="fa fa-check"></i><b>10.4.1</b> Remove chart details</a></li>
<li class="chapter" data-level="10.4.2" data-path="Polishing.html"><a href="Polishing.html#predefined-themes-adjust-many-elements"><i class="fa fa-check"></i><b>10.4.2</b> Predefined themes adjust many elements</a></li>
<li class="chapter" data-level="10.4.3" data-path="Polishing.html"><a href="Polishing.html#ordering-theme-layers"><i class="fa fa-check"></i><b>10.4.3</b> Ordering theme layers</a></li>
<li class="chapter" data-level="10.4.4" data-path="Polishing.html"><a href="Polishing.html#pre-set-theme-options"><i class="fa fa-check"></i><b>10.4.4</b> Pre-set theme options</a></li>
<li class="chapter" data-level="10.4.5" data-path="Polishing.html"><a href="Polishing.html#themes-form-other-packages"><i class="fa fa-check"></i><b>10.4.5</b> Themes form other packages</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="Polishing.html"><a href="Polishing.html#saving-and-printing-plots-to-include-in-documents"><i class="fa fa-check"></i><b>10.5</b> Saving and printing plots to include in documents</a><ul>
<li class="chapter" data-level="10.5.1" data-path="Polishing.html"><a href="Polishing.html#png-jpeg-pdf-and-svg"><i class="fa fa-check"></i><b>10.5.1</b> PNG, JPEG, PDF, and SVG</a></li>
<li class="chapter" data-level="10.5.2" data-path="Polishing.html"><a href="Polishing.html#combining-multiple-graphs-for-publication"><i class="fa fa-check"></i><b>10.5.2</b> Combining multiple graphs for publication</a></li>
<li class="chapter" data-level="10.5.3" data-path="Polishing.html"><a href="Polishing.html#faceted-pagination"><i class="fa fa-check"></i><b>10.5.3</b> Faceted pagination</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Interaction.html"><a href="Interaction.html"><i class="fa fa-check"></i><b>11</b> Interaction–zoom, annotate, highlight</a></li>
<li class="chapter" data-level="12" data-path="shinyadvanced-interactive-graphics.html"><a href="shinyadvanced-interactive-graphics.html"><i class="fa fa-check"></i><b>12</b> Shiny–Advanced interactive graphics</a></li>
<li class="appendix"><span><b>Appendix</b></span><ul>
<li class="chapter" data-level="A.1" data-path="03-association.html"><a href="#data-sources"><i class="fa fa-check"></i><b>A.1</b> Data sources</a></li>
<li class="chapter" data-level="A.2" data-path="shinyadvanced-interactive-graphics.html"><a href="shinyadvanced-interactive-graphics.html#visualization-resources"><i class="fa fa-check"></i><b>A.2</b> Visualization resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Interactive data visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Association" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Association–scatterplots</h1>
<div id="basic-elements-of-the-grammar-of-graphics" class="section level2">
<h2><span class="header-section-number">3.1</span> Basic elements of the grammar of graphics</h2>
<table>
<caption><span id="tab:test">TABLE 3.1: </span> Summary of ggplot element.</caption>
<thead>
<tr class="header">
<th>ggplot element</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data</td>
<td>ggplot uses a dataframe as input (e.g., data = mtcars.data)</td>
</tr>
<tr class="even">
<td>Geoms</td>
<td>geometric element (e.g., geom_point, geom_bar)</td>
</tr>
<tr class="odd">
<td>Mapping</td>
<td>links data variables to aesthetic dimensions (aes) (e.g., aes(x = cyl, y = mpg))</td>
</tr>
<tr class="even">
<td>Setting</td>
<td>specifies value of aesthetic dimension directly (e.g., colour = “blue”)</td>
</tr>
<tr class="odd">
<td>Layers</td>
<td>add components to base plot, most often geoms (additional layers added with “+”)</td>
</tr>
<tr class="even">
<td>Stats</td>
<td>statistical summary, such as density or count; each geom has a default statistic</td>
</tr>
<tr class="odd">
<td>Position</td>
<td>adjusts the location of the plotted geom</td>
</tr>
<tr class="even">
<td>Annotations</td>
<td>text and graphical overlays</td>
</tr>
<tr class="odd">
<td>Coordinate system</td>
<td>Cartesian, polar or small multiple facets</td>
</tr>
<tr class="even">
<td>Themes</td>
<td>sets of plot parameters (e.g., font, background)</td>
</tr>
</tbody>
</table>
</div>
<div id="simple-scatterplot" class="section level2">
<h2><span class="header-section-number">3.2</span> Simple scatterplot</h2>
<p>The simplest plot must include data, aesthetic mapping, and geom a geometric element. The data must be organized with each observation as a row and each variable as a column. For a scatterplot the geometric element is a point, and the aesthetic mapping links variables to properties of the geometric element. For a scatterplot this would be the x and y position of the point. the the point the x and y position must be specified, but other properties, such as color, size, alpha level, and shape, can be mapped to variables. These properties of the geometric element can also be set to specific values, such as specifying the color of the point.</p>
<p>Figure <a href="#fig:simple-scatterplot"><strong>??</strong></a> shows the ggplot2 code and associated scatterplot. The equation used to specify the plot implicitly specifies the values by their position, such as data being identifed as following “ggplot(”. The following speciifcations are equivalent:</p>
<p>`` ggplot(data = mtcars.df, mapping = aes(x = wt, y = mpg)) + geom_point(colour = “darkblue”)</p>
<p>ggplot(mtcars.df, aes(wt, mpg)) + geom_point(colour = “darkblue”) ``</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)

mtcars.df =<span class="st"> </span>mtcars

<span class="kw">ggplot</span>(<span class="dt">data =</span> mtcars.df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;darkblue&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/simple-scatterplot-1.png" width="672" /></p>
<p>A powerful feature of ggplot2 is the abilty to add layers of geometric elements to a plot. Each layer can have its own data, mapping of aesthetic properties, and setting of aesthetic properties. The data and mapping specified in the base plot statement–“ggplot(data = mtcars.df, mapping = aes(x = wt, y = mpg))”–are global and apply to all layers, but can overridden by the any mappings specific to a layer. Figure <a href="#fig:scatterplot-layering"><strong>??</strong></a> shows a layer of red circles based on a subset of the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fourcyl.mtcars.df =<span class="st"> </span>mtcars.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(cyl<span class="op">==</span><span class="dv">4</span>)

<span class="kw">ggplot</span>(<span class="dt">data =</span> mtcars.df, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;darkblue&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> fourcyl.mtcars.df, <span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">size =</span> <span class="dv">4</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-layering-1.png" width="672" /></p>
</div>
<div id="scatterplot-with-additional-mappings" class="section level2">
<h2><span class="header-section-number">3.3</span> Scatterplot with additional mappings</h2>
<p>The scatterplot typically maps variables to the x and y position of the points, but ggplot allows for other mappings. Figure <a href="#fig:scatterplot-mapping"><strong>??</strong></a> shows mapping variables to the fill and size of the points. The shape, stroke, and color of the points are set to values they could also be mapped, which could quickly overload the graph. Note that only shapes 21-25 in Figure <a href="#fig:symbols"><strong>??</strong></a> can include fill and stroke, with the other symbols color determines the color of the whole symbol not just the border.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mtcars, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg, <span class="dt">fill =</span> hp, <span class="dt">size =</span> <span class="dv">1</span><span class="op">/</span>qsec)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">colour =</span> <span class="st">&quot;darkred&quot;</span>, <span class="dt">stroke =</span> <span class="dv">2</span>.) </code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-mapping-1.png" width="672" /></p>
<p><img src="visualizationwithggplot_files/figure-html/symbols-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RColorBrewer)
<span class="co"># display.brewer.all(type=&quot;qual&quot;)</span>
<span class="co"># </span>
<span class="co"># display.brewer.all(type=&quot;div&quot;)</span>

<span class="kw">display.brewer.all</span>(<span class="dt">n=</span><span class="ot">NULL</span>, <span class="dt">type=</span><span class="st">&quot;all&quot;</span>, <span class="dt">select=</span><span class="ot">NULL</span>, <span class="dt">exact.n=</span><span class="ot">TRUE</span>, 
<span class="dt">colorblindFriendly=</span><span class="ot">FALSE</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="scatterplot-with-linear-and-loess-fit" class="section level2">
<h2><span class="header-section-number">3.4</span> Scatterplot with linear and loess fit</h2>
<p>The layers can include geometric elements beyond geom_point. Perhapts the most useful geoms to add to a scatterplot is a curve fit. Figure <a href="#fig:scatterplot-smooth"><strong>??</strong></a> shows a simple scatterplot with two cruve fits. The loess fit shows a smooth fit that indicates non-linar trends, and the blue line shows a linear regeression. The loess line highligths areas in the data that deviate from a linear relationship shown by the blue line. All three layers inherit the same x and y mapping from the ggplot base layer.</p>
<p>When building a plot each layer is placed on top of the preceding layer, such that the last layer lies on top of all the others. With Figure <a href="#fig:scatterplot-smooth"><strong>??</strong></a>, the points are on the bottom and the light blue line is on top of the gray loess line.</p>
<p>Table <a href="#tab:geoms"><strong>??</strong></a> shows the full set of possible geometric elements that can be used to create graphs, the following chapters describe many of these.</p>
<p>Note the smooth fit geoms include additional settings for the method and whether the line should include a standard error.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mtcars.df, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;darkblue&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">colour =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;lightblue&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-smooth-1.png" width="672" /></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
x
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
geom_abline
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_area
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_bar
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_bin2d
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_blank
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_boxplot
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_col
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_contour
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_count
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_crossbar
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_curve
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_density
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_density_2d
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_density2d
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_dotplot
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_errorbar
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_errorbarh
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_freqpoly
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_hex
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_histogram
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_hline
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_jitter
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_label
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_line
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_linerange
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_map
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_path
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_point
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_pointrange
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_polygon
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_qq
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_quantile
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_raster
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_rect
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_ribbon
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_rug
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_segment
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_smooth
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_spoke
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_step
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_text
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_tile
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_violin
</td>
</tr>
<tr>
<td style="text-align:left;">
geom_vline
</td>
</tr>
</tbody>
</table>
</div>
<div id="global-and-local-regression" class="section level2">
<h2><span class="header-section-number">3.5</span> Global and local regression</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mtcars.df, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> lm, <span class="dt">colour =</span> <span class="st">&quot;darkgrey&quot;</span>, <span class="dt">size =</span> .<span class="dv">5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw">as.factor</span>(cyl))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw">as.factor</span>(cyl)), <span class="dt">method =</span> lm, <span class="dt">se =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-globallocal-1.png" width="672" /></p>
</div>
<div id="quantile-regression-and-other-functional-relationships" class="section level2">
<h2><span class="header-section-number">3.6</span> Quantile regression and other functional relationships</h2>
<p>Often the question the graph is meant to answer is not about the central tendency, but about the likelihood of relatively extreme values, such as the 25th and 75th percentiles.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mtcars.df, <span class="kw">aes</span>(<span class="dt">x =</span> wt, <span class="dt">y =</span> mpg)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> lm, <span class="dt">colour =</span> <span class="st">&quot;darkgrey&quot;</span>, <span class="dt">size =</span> .<span class="dv">5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_quantile</span>(<span class="dt">quantiles =</span> <span class="kw">c</span>(.<span class="dv">25</span>, .<span class="dv">75</span>))</code></pre></div>
<pre><code>## Loading required package: SparseM</code></pre>
<pre><code>## 
## Attaching package: &#39;SparseM&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     backsolve</code></pre>
<pre><code>## Smoothing formula not specified. Using: y ~ x</code></pre>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-quantile-1.png" width="672" /></p>
</div>
<div id="scatterplot-with-regression-equation-and-marginal-distributions" class="section level2">
<h2><span class="header-section-number">3.7</span> Scatterplot with regression equation and marginal distributions</h2>
<p>Scatterplot augmented with marginal distributions, regression equation, and Tufte-inspired range frame.</p>
<p>Marginal distributions show that a 1-D scatterplot is a histogram and that a 2-d histogram is a scatterplot. Chapter <a href="Distribution.html#Distribution">4</a> describes such plots in detail.</p>
<p>Chapter <a href="Polishing.html#Polishing">10</a> shows how to add annotations, such as the equation.</p>
<p>Derived from: <a href="http://t-redactyl.io/blog/2016/05/creating-plots-in-r-using-ggplot2-part-11-linear-regression-plots.html" class="uri">http://t-redactyl.io/blog/2016/05/creating-plots-in-r-using-ggplot2-part-11-linear-regression-plots.html</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggthemes)
<span class="kw">library</span>(ggExtra) <span class="co"># For marginal histograms</span></code></pre></div>
<pre><code>## Warning: package &#39;ggExtra&#39; was built under R version
## 3.4.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">equation =<span class="st"> </span><span class="cf">function</span>(x) {
  lm_coef &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="kw">round</span>(<span class="kw">coef</span>(x)[<span class="dv">1</span>], <span class="dt">digits =</span> <span class="dv">2</span>),
                  <span class="dt">b =</span> <span class="kw">round</span>(<span class="kw">coef</span>(x)[<span class="dv">2</span>], <span class="dt">digits =</span> <span class="dv">2</span>),
                  <span class="dt">r2 =</span> <span class="kw">round</span>(<span class="kw">summary</span>(x)<span class="op">$</span>r.squared, <span class="dt">digits =</span> <span class="dv">2</span>));
  lm_eq &lt;-<span class="st"> </span><span class="kw">substitute</span>(<span class="kw">italic</span>(y) <span class="op">==</span><span class="st"> </span>a <span class="op">+</span><span class="st"> </span>b <span class="op">%.%</span><span class="st"> </span><span class="kw">italic</span>(x)<span class="op">*</span><span class="st">&quot;,&quot;</span><span class="op">~</span><span class="er">~</span><span class="kw">italic</span>(R)<span class="op">^</span><span class="dv">2</span><span class="op">~</span><span class="st">&quot;=&quot;</span><span class="op">~</span>r2,lm_coef)
  <span class="kw">as.character</span>(<span class="kw">as.expression</span>(lm_eq));                 
}

mtcars.df =<span class="st"> </span>mtcars
fit =<span class="st"> </span><span class="kw">lm</span>(mpg<span class="op">~</span>wt, <span class="dt">data =</span> mtcars.df)

p =<span class="st"> </span><span class="kw">ggplot</span>(mtcars.df, <span class="kw">aes</span>(<span class="dt">x=</span>wt, <span class="dt">y=</span>mpg)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;darkblue&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span>lm, <span class="dt">se=</span><span class="ot">FALSE</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> <span class="dv">4</span>, <span class="dt">y =</span> <span class="dv">30</span>, <span class="dt">label =</span> <span class="kw">equation</span>(fit), <span class="dt">parse =</span> <span class="ot">TRUE</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rangeframe</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Requires ggthemes </span>
<span class="st">  </span><span class="kw">theme_minimal</span>()

p =<span class="st"> </span><span class="kw">ggMarginal</span>(p, <span class="dt">type =</span> <span class="st">&quot;histogram&quot;</span>)
p</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-marginal-1.png" width="672" /></p>
</div>
<div id="categorical-scatterplot" class="section level2">
<h2><span class="header-section-number">3.8</span> Categorical scatterplot</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars.df =<span class="st"> </span>mtcars
mtcars.df<span class="op">$</span>gear =<span class="st"> </span><span class="kw">as.factor</span>(mtcars.df<span class="op">$</span>gear)
mtcars.df<span class="op">$</span>am =<span class="st"> </span><span class="kw">as.factor</span>(mtcars.df<span class="op">$</span>am)

<span class="kw">ggplot</span>(mtcars.df, <span class="kw">aes</span>(gear, am)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_count</span>()</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-categorical-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> <span class="kw">ggplot</span>(mtcars.df, <span class="kw">aes</span>(gear, am)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.075</span>, <span class="dt">height =</span> <span class="fl">0.075</span>) </code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-categorical-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s.mtcars.df =<span class="st"> </span>mtcars.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(gear, am) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>())

<span class="kw">ggplot</span>(s.mtcars.df, <span class="kw">aes</span>(gear, am)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_tile</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> count))</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-categorical-3.png" width="672" /></p>
</div>
<div id="table-lens" class="section level2">
<h2><span class="header-section-number">3.9</span> Table lens</h2>
<p>Table lens serves a similar purpose to the scatterplot but might be more familiar and focusses attention on individual variables and individual cases. Chapter <a href="Tables.html#Tables">9</a> provides more detail on this technique.</p>
<div id="htmlwidget-8b255151ac9d79a9c02d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-8b255151ac9d79a9c02d">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32"],["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>mpg<\/th>\n      <th>wt<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'background':isNaN(parseFloat(value)) || value <= 1.513 ? '' : 'linear-gradient(90deg, transparent ' + (33.9 - value)/32.387 * 100 + '%, lightblue ' + (33.9 - value)/32.387 * 100 + '%)','background-size':'98% 88%','background-repeat':'no-repeat','background-position':'center'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background':isNaN(parseFloat(value)) || value <= 1.513 ? '' : 'linear-gradient(90deg, transparent ' + (33.9 - value)/32.387 * 100 + '%, lightblue ' + (33.9 - value)/32.387 * 100 + '%)','background-size':'98% 88%','background-repeat':'no-repeat','background-position':'center'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
<div id="scatterplot-with-overplotting-mitigation" class="section level2">
<h2><span class="header-section-number">3.10</span> Scatterplot with overplotting mitigation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diamonds.df =<span class="st"> </span>diamonds

<span class="kw">ggplot</span>(diamonds.df, <span class="kw">aes</span>(carat, price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(diamonds.df, <span class="kw">aes</span>(carat, price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> .<span class="dv">1</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(diamonds.df, <span class="kw">aes</span>(carat, price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> .<span class="dv">3</span>, <span class="dt">shape =</span> <span class="dv">21</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-3.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(diamonds.df, <span class="kw">aes</span>(carat, price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> .<span class="dv">3</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">alpha =</span> .<span class="dv">3</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-4.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(diamonds.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sample_n</span>(<span class="dv">10000</span>), <span class="kw">aes</span>(carat, price)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> .<span class="dv">3</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">alpha =</span> .<span class="dv">3</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-5.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(diamonds.df, <span class="kw">aes</span>(<span class="kw">log</span>(carat), <span class="kw">log</span>(price))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> .<span class="dv">3</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">alpha =</span> .<span class="dv">3</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-6.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(diamonds.df, <span class="kw">aes</span>(<span class="kw">log</span>(carat), <span class="kw">log</span>(price))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_count</span>(<span class="dt">show.legend=</span>F, <span class="dt">alpha =</span>.<span class="dv">3</span>, <span class="dt">shape =</span><span class="dv">21</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-7.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mtcars.df, <span class="kw">aes</span>( <span class="dt">x =</span> disp, <span class="dt">y =</span> hp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">colour =</span> <span class="st">&quot;grey40&quot;</span>, <span class="dt">shape =</span> <span class="dv">21</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> loess, <span class="dt">colour =</span> <span class="st">&quot;grey40&quot;</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> lm, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">size =</span> .<span class="dv">75</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> <span class="kw">factor</span>(cyl)), 
        <span class="dt">method =</span> lm, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">size =</span> <span class="fl">1.5</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-overplot-8.png" width="672" /></p>
</div>
<div id="a-matrix-of-scatterplots" class="section level2">
<h2><span class="header-section-number">3.11</span> A matrix of scatterplots</h2>
<pre><code>##  [1] &quot;mpg&quot;  &quot;cyl&quot;  &quot;disp&quot; &quot;hp&quot;   &quot;drat&quot; &quot;wt&quot;   &quot;qsec&quot;
##  [8] &quot;vs&quot;   &quot;am&quot;   &quot;gear&quot; &quot;carb&quot;</code></pre>
<p><img src="visualizationwithggplot_files/figure-html/scatterplot-matrix-1.png" width="672" /></p>


</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Principles.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Distribution.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jdlee/interactive-data-visualization/blob/master/03-association.Rmd",
"text": "Edit"
},
"download": ["visualizationwithggplot.pdf", "visualizationwithggplot.epub"],
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
