<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Interactive data visualization</title>
  <meta name="description" content="A book of ggplot examples">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Interactive data visualization" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/Minard_timeline_map.png" />
  <meta property="og:description" content="A book of ggplot examples" />
  <meta name="github-repo" content="jdlee/ggplot-examples" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Interactive data visualization" />
  
  <meta name="twitter:description" content="A book of ggplot examples" />
  <meta name="twitter:image" content="images/Minard_timeline_map.png" />

<meta name="author" content="John D. Lee">


<meta name="date" content="2018-08-23">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="Proportion.html">
<link rel="next" href="Connection.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding/datatables.js"></script>
<link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider/jquery.nouislider.min.js"></script>
<link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize/selectize.min.js"></script>
<script src="libs/d3/d3.min.js"></script>
<script src="libs/d3-lasso/d3-lasso.min.js"></script>
<link href="libs/ggiraph/styles.css" rel="stylesheet" />
<script src="libs/ggiraph/ggiraph_utils.js"></script>
<script src="libs/ggiraph/ggiraph_over_effect.js"></script>
<script src="libs/ggiraph/ggiraph_zoom.js"></script>
<script src="libs/ggiraph/ggiraph_tooltip.js"></script>
<script src="libs/ggiraph/ggiraph_selector.js"></script>
<script src="libs/ggiraph-binding/ggiraph.js"></script>
<script src="libs/svg_1/scripts_svg_1.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Interactive Data Visualization in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-read-this-book"><i class="fa fa-check"></i>Why read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-the-book"><i class="fa fa-check"></i>Structure of the book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="Introduction.html"><a href="Introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction: Purposes, questions, and audiences</a><ul>
<li class="chapter" data-level="1.1" data-path="Introduction.html"><a href="Introduction.html#seeing-meaning-rather-than-numbers"><i class="fa fa-check"></i><b>1.1</b> Seeing meaning rather than numbers</a></li>
<li class="chapter" data-level="1.2" data-path="Introduction.html"><a href="Introduction.html#seeing-more-than-summary-statistics"><i class="fa fa-check"></i><b>1.2</b> Seeing more than summary statistics</a></li>
<li class="chapter" data-level="1.3" data-path="Introduction.html"><a href="Introduction.html#purposse-and-audiences-of-visualizations"><i class="fa fa-check"></i><b>1.3</b> Purposse and audiences of visualizations</a></li>
<li class="chapter" data-level="1.4" data-path="Introduction.html"><a href="Introduction.html#what-question-to-answer"><i class="fa fa-check"></i><b>1.4</b> What question to answer?</a></li>
<li class="chapter" data-level="1.5" data-path="Introduction.html"><a href="Introduction.html#storytelling-with-graphics"><i class="fa fa-check"></i><b>1.5</b> Storytelling with graphics</a></li>
<li class="chapter" data-level="1.6" data-path="Introduction.html"><a href="Introduction.html#data-sources"><i class="fa fa-check"></i><b>1.6</b> Data sources</a></li>
<li class="chapter" data-level="1.7" data-path="Introduction.html"><a href="Introduction.html#grammar-of-data-manipulation"><i class="fa fa-check"></i><b>1.7</b> Grammar of data manipulation</a></li>
<li class="chapter" data-level="1.8" data-path="Introduction.html"><a href="Introduction.html#grammar-of-graphics"><i class="fa fa-check"></i><b>1.8</b> Grammar of graphics</a></li>
<li class="chapter" data-level="1.9" data-path="Introduction.html"><a href="Introduction.html#considering-cognitive-capabilities-in-graphic-design"><i class="fa fa-check"></i><b>1.9</b> Considering cognitive capabilities in graphic design</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Principles.html"><a href="Principles.html"><i class="fa fa-check"></i><b>2</b> Visualization types and principles</a><ul>
<li class="chapter" data-level="2.1" data-path="Principles.html"><a href="Principles.html#pairing-questions-and-graph-types"><i class="fa fa-check"></i><b>2.1</b> Pairing questions and graph types</a></li>
<li class="chapter" data-level="2.2" data-path="Principles.html"><a href="Principles.html#percpetual-processes-to-be-supported-comparison-detection-pattern-identification"><i class="fa fa-check"></i><b>2.2</b> Percpetual processes to be supported: Comparison, Detection, Pattern identification</a><ul>
<li class="chapter" data-level="2.2.1" data-path="Principles.html"><a href="Principles.html#comparing-and-reading-values"><i class="fa fa-check"></i><b>2.2.1</b> Comparing and reading values</a></li>
<li class="chapter" data-level="2.2.2" data-path="Principles.html"><a href="Principles.html#detecting-and-selecting"><i class="fa fa-check"></i><b>2.2.2</b> Detecting and selecting</a></li>
<li class="chapter" data-level="2.2.3" data-path="Principles.html"><a href="Principles.html#identifying-groups-and-patterns"><i class="fa fa-check"></i><b>2.2.3</b> Identifying groups and patterns</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Principles.html"><a href="Principles.html#principles-from-general-to-specific"><i class="fa fa-check"></i><b>2.3</b> Principles from general to specific</a><ul>
<li class="chapter" data-level="2.3.1" data-path="Principles.html"><a href="Principles.html#identify-audience-story-and-key-relationships-few"><i class="fa fa-check"></i><b>2.3.1</b> Identify audience, story, and key relationships (Few)</a></li>
<li class="chapter" data-level="2.3.2" data-path="Principles.html"><a href="Principles.html#focus-attention-and-organize-reading"><i class="fa fa-check"></i><b>2.3.2</b> Focus attention and organize reading</a></li>
<li class="chapter" data-level="2.3.3" data-path="Principles.html"><a href="Principles.html#annotate-to-show-cause-and-explain-why"><i class="fa fa-check"></i><b>2.3.3</b> Annotate to show cause and explain why</a></li>
<li class="chapter" data-level="2.3.4" data-path="Principles.html"><a href="Principles.html#concrete-details-engage-and-are-memorable"><i class="fa fa-check"></i><b>2.3.4</b> Concrete details engage and are memorable</a></li>
<li class="chapter" data-level="2.3.5" data-path="Principles.html"><a href="Principles.html#enable-comparisons-and-put-data-in-context"><i class="fa fa-check"></i><b>2.3.5</b> Enable comparisons and put data in context</a></li>
<li class="chapter" data-level="2.3.6" data-path="Principles.html"><a href="Principles.html#map-types-of-variables-to-graph-features"><i class="fa fa-check"></i><b>2.3.6</b> Map types of variables to graph features</a></li>
<li class="chapter" data-level="2.3.7" data-path="Principles.html"><a href="Principles.html#ensure-proximity-compatibility"><i class="fa fa-check"></i><b>2.3.7</b> Ensure proximity compatibility</a></li>
<li class="chapter" data-level="2.3.8" data-path="Principles.html"><a href="Principles.html#legibility-and-consistency"><i class="fa fa-check"></i><b>2.3.8</b> Legibility and consistency</a></li>
<li class="chapter" data-level="2.3.9" data-path="Principles.html"><a href="Principles.html#maximize-dataink-ratio"><i class="fa fa-check"></i><b>2.3.9</b> Maximize data/ink ratio</a></li>
<li class="chapter" data-level="2.3.10" data-path="Principles.html"><a href="Principles.html#manage-clutter-with-grouping-and-layering"><i class="fa fa-check"></i><b>2.3.10</b> Manage clutter with grouping and layering</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Principles.html"><a href="Principles.html#overview-of-examples"><i class="fa fa-check"></i><b>2.4</b> Overview of examples</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Association.html"><a href="Association.html"><i class="fa fa-check"></i><b>3</b> Association–scatterplots</a><ul>
<li class="chapter" data-level="3.1" data-path="Association.html"><a href="Association.html#basic-elements-of-the-grammar-of-graphics"><i class="fa fa-check"></i><b>3.1</b> Basic elements of the grammar of graphics</a></li>
<li class="chapter" data-level="3.2" data-path="Association.html"><a href="Association.html#simple-scatterplot"><i class="fa fa-check"></i><b>3.2</b> Simple scatterplot</a></li>
<li class="chapter" data-level="3.3" data-path="Association.html"><a href="Association.html#scatterplot-with-additional-mappings"><i class="fa fa-check"></i><b>3.3</b> Scatterplot with additional mappings</a></li>
<li class="chapter" data-level="3.4" data-path="Association.html"><a href="Association.html#scatterplot-with-linear-and-loess-fit"><i class="fa fa-check"></i><b>3.4</b> Scatterplot with linear and loess fit</a></li>
<li class="chapter" data-level="3.5" data-path="Association.html"><a href="Association.html#global-and-local-regression"><i class="fa fa-check"></i><b>3.5</b> Global and local regression</a></li>
<li class="chapter" data-level="3.6" data-path="Association.html"><a href="Association.html#quantile-regression-and-other-functional-relationships"><i class="fa fa-check"></i><b>3.6</b> Quantile regression and other functional relationships</a></li>
<li class="chapter" data-level="3.7" data-path="Association.html"><a href="Association.html#scatterplot-with-regression-equation-and-marginal-distributions"><i class="fa fa-check"></i><b>3.7</b> Scatterplot with regression equation and marginal distributions</a></li>
<li class="chapter" data-level="3.8" data-path="Association.html"><a href="Association.html#categorical-scatterplot"><i class="fa fa-check"></i><b>3.8</b> Categorical scatterplot</a></li>
<li class="chapter" data-level="3.9" data-path="Association.html"><a href="Association.html#table-lens"><i class="fa fa-check"></i><b>3.9</b> Table lens</a></li>
<li class="chapter" data-level="3.10" data-path="Association.html"><a href="Association.html#scatterplot-with-overplotting-mitigation"><i class="fa fa-check"></i><b>3.10</b> Scatterplot with overplotting mitigation</a></li>
<li class="chapter" data-level="3.11" data-path="Association.html"><a href="Association.html#a-matrix-of-scatterplots"><i class="fa fa-check"></i><b>3.11</b> A matrix of scatterplots</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Distribution.html"><a href="Distribution.html"><i class="fa fa-check"></i><b>4</b> Distribution–histograms and density plots</a><ul>
<li class="chapter" data-level="4.1" data-path="Distribution.html"><a href="Distribution.html#histograms-and-bin-choice"><i class="fa fa-check"></i><b>4.1</b> Histograms and bin choice</a></li>
<li class="chapter" data-level="4.2" data-path="Distribution.html"><a href="Distribution.html#density-and-kernel-adjustment"><i class="fa fa-check"></i><b>4.2</b> Density and kernel adjustment</a></li>
<li class="chapter" data-level="4.3" data-path="Distribution.html"><a href="Distribution.html#histogram-percentage-rather-than-count"><i class="fa fa-check"></i><b>4.3</b> Histogram percentage rather than count</a></li>
<li class="chapter" data-level="4.4" data-path="Distribution.html"><a href="Distribution.html#histogram-density-overlay-and-normal-overlay"><i class="fa fa-check"></i><b>4.4</b> Histogram, density overlay, and normal overlay</a></li>
<li class="chapter" data-level="4.5" data-path="Distribution.html"><a href="Distribution.html#cummulative-density"><i class="fa fa-check"></i><b>4.5</b> Cummulative density</a></li>
<li class="chapter" data-level="4.6" data-path="Distribution.html"><a href="Distribution.html#quantile-quantle-plot"><i class="fa fa-check"></i><b>4.6</b> Quantile-quantle plot</a></li>
<li class="chapter" data-level="4.7" data-path="Distribution.html"><a href="Distribution.html#cummulative-density-1"><i class="fa fa-check"></i><b>4.7</b> Cummulative density</a></li>
<li class="chapter" data-level="4.8" data-path="Distribution.html"><a href="Distribution.html#distribution-2-d-distribution-and-overplotting-revisited"><i class="fa fa-check"></i><b>4.8</b> Distribution: 2-D distribution and overplotting revisited</a></li>
<li class="chapter" data-level="4.9" data-path="Distribution.html"><a href="Distribution.html#tufte-smallmultiples"><i class="fa fa-check"></i><b>4.9</b> Small multiple histogram with density and median reference lines</a></li>
<li class="chapter" data-level="4.10" data-path="Distribution.html"><a href="Distribution.html#ridge-plotan-array-of-density-plots"><i class="fa fa-check"></i><b>4.10</b> Ridge plot–An array of density plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Comparison.html"><a href="Comparison.html"><i class="fa fa-check"></i><b>5</b> Comparison–barchart and boxplots</a><ul>
<li class="chapter" data-level="5.1" data-path="Comparison.html"><a href="Comparison.html#graph-considerations-for-communication-aggregation-abstraction-complexity"><i class="fa fa-check"></i><b>5.1</b> Graph considerations for communication: aggregation, abstraction, complexity</a><ul>
<li class="chapter" data-level="5.1.1" data-path="Comparison.html"><a href="Comparison.html#simple-bar-chart"><i class="fa fa-check"></i><b>5.1.1</b> Simple bar chart</a></li>
<li class="chapter" data-level="5.1.2" data-path="Comparison.html"><a href="Comparison.html#bar-chart-with-error-bars"><i class="fa fa-check"></i><b>5.1.2</b> Bar chart with error bars</a></li>
<li class="chapter" data-level="5.1.3" data-path="Comparison.html"><a href="Comparison.html#dotplot-and-offset-range-plot"><i class="fa fa-check"></i><b>5.1.3</b> dotplot and offset range plot</a></li>
<li class="chapter" data-level="5.1.4" data-path="Comparison.html"><a href="Comparison.html#statistical-significance-in-context"><i class="fa fa-check"></i><b>5.1.4</b> Statistical significance in context</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="Comparison.html"><a href="Comparison.html#comparing-distributions-box-violyn-and-sina-plot"><i class="fa fa-check"></i><b>5.2</b> Comparing distributions, box, violyn, and sina plot</a><ul>
<li class="chapter" data-level="5.2.1" data-path="Comparison.html"><a href="Comparison.html#compare-empirical-and-theoretical-distribution"><i class="fa fa-check"></i><b>5.2.1</b> Compare empirical and theoretical distribution</a></li>
<li class="chapter" data-level="5.2.2" data-path="Comparison.html"><a href="Comparison.html#tufte-inspired-minimal-bar-chart"><i class="fa fa-check"></i><b>5.2.2</b> Tufte-inspired minimal bar chart</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Comparison.html"><a href="Comparison.html#comparing-across-many-variables"><i class="fa fa-check"></i><b>5.3</b> Comparing across many variables</a><ul>
<li class="chapter" data-level="5.3.1" data-path="Comparison.html"><a href="Comparison.html#dot-plots-and-reordering"><i class="fa fa-check"></i><b>5.3.1</b> Dot plots and reordering</a></li>
<li class="chapter" data-level="5.3.2" data-path="Comparison.html"><a href="Comparison.html#point-range-on-x-and-y"><i class="fa fa-check"></i><b>5.3.2</b> Point range on x and y</a></li>
<li class="chapter" data-level="5.3.3" data-path="Comparison.html"><a href="Comparison.html#tufte-boxplot-for-many-variables"><i class="fa fa-check"></i><b>5.3.3</b> Tufte boxplot for many variables</a></li>
<li class="chapter" data-level="5.3.4" data-path="Comparison.html"><a href="Comparison.html#tufte-slopegraph"><i class="fa fa-check"></i><b>5.3.4</b> Tufte-inspired slope graphs</a></li>
<li class="chapter" data-level="5.3.5" data-path="Comparison.html"><a href="Comparison.html#parallel-coordinate-plot-with-similar-items-highlighted"><i class="fa fa-check"></i><b>5.3.5</b> Parallel coordinate plot with similar items highlighted</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="Comparison.html"><a href="Comparison.html#gliphs-chernof-face-and-radar-plots"><i class="fa fa-check"></i><b>5.4</b> Gliphs: Chernof face and radar plots</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Proportion.html"><a href="Proportion.html"><i class="fa fa-check"></i><b>6</b> Proportion–Pie charts and pareto plots</a><ul>
<li class="chapter" data-level="6.1" data-path="Proportion.html"><a href="Proportion.html#pie-and-bar-chart"><i class="fa fa-check"></i><b>6.1</b> Pie and bar chart</a></li>
<li class="chapter" data-level="6.2" data-path="Proportion.html"><a href="Proportion.html#pareto-plot-whole-part-and-and-ranking"><i class="fa fa-check"></i><b>6.2</b> Pareto plot: Whole part and and ranking</a></li>
<li class="chapter" data-level="6.3" data-path="Proportion.html"><a href="Proportion.html#stacked-bar-chart"><i class="fa fa-check"></i><b>6.3</b> Stacked bar chart</a></li>
<li class="chapter" data-level="6.4" data-path="Proportion.html"><a href="Proportion.html#faceted-bar-chart-with-overall-reference-distribution"><i class="fa fa-check"></i><b>6.4</b> Faceted Bar chart with overall reference distribution</a></li>
<li class="chapter" data-level="6.5" data-path="Proportion.html"><a href="Proportion.html#rose-or-coxcomb-plots"><i class="fa fa-check"></i><b>6.5</b> Rose or Coxcomb plots</a></li>
<li class="chapter" data-level="6.6" data-path="Proportion.html"><a href="Proportion.html#stacked-dodged-and-opposed-bar-chart"><i class="fa fa-check"></i><b>6.6</b> Stacked, dodged, and opposed bar chart</a></li>
<li class="chapter" data-level="6.7" data-path="Proportion.html"><a href="Proportion.html#likert-scale-plot"><i class="fa fa-check"></i><b>6.7</b> Likert scale plot</a></li>
<li class="chapter" data-level="6.8" data-path="Proportion.html"><a href="Proportion.html#ternary-triangular-graph"><i class="fa fa-check"></i><b>6.8</b> ternary (triangular) graph</a></li>
<li class="chapter" data-level="6.9" data-path="Proportion.html"><a href="Proportion.html#treemaps-for-whole-part-of-hierarchy"><i class="fa fa-check"></i><b>6.9</b> Treemaps for whole-part of hierarchy</a></li>
<li class="chapter" data-level="6.10" data-path="Proportion.html"><a href="Proportion.html#circle-packing"><i class="fa fa-check"></i><b>6.10</b> Circle packing</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Fluctuation.html"><a href="Fluctuation.html"><i class="fa fa-check"></i><b>7</b> Fluctuation–timelines</a><ul>
<li class="chapter" data-level="7.1" data-path="Fluctuation.html"><a href="Fluctuation.html#multiple-time-series"><i class="fa fa-check"></i><b>7.1</b> Multiple time series</a></li>
<li class="chapter" data-level="7.2" data-path="Fluctuation.html"><a href="Fluctuation.html#time-series-with-reference-line"><i class="fa fa-check"></i><b>7.2</b> Time series with reference line</a></li>
<li class="chapter" data-level="7.3" data-path="Fluctuation.html"><a href="Fluctuation.html#cycle-plot"><i class="fa fa-check"></i><b>7.3</b> Cycle plot</a></li>
<li class="chapter" data-level="7.4" data-path="Fluctuation.html"><a href="Fluctuation.html#step-graph"><i class="fa fa-check"></i><b>7.4</b> Step graph</a></li>
<li class="chapter" data-level="7.5" data-path="Fluctuation.html"><a href="Fluctuation.html#faceted-zoom"><i class="fa fa-check"></i><b>7.5</b> Faceted zoom</a></li>
<li class="chapter" data-level="7.6" data-path="Fluctuation.html"><a href="Fluctuation.html#ridge-plot"><i class="fa fa-check"></i><b>7.6</b> Ridge plot</a></li>
<li class="chapter" data-level="7.7" data-path="Fluctuation.html"><a href="Fluctuation.html#stacked-area-and-line-graphs"><i class="fa fa-check"></i><b>7.7</b> Stacked area and line graphs</a></li>
<li class="chapter" data-level="7.8" data-path="Fluctuation.html"><a href="Fluctuation.html#temporal-heatmap"><i class="fa fa-check"></i><b>7.8</b> Temporal heatmap</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Connection.html"><a href="Connection.html"><i class="fa fa-check"></i><b>8</b> Connection–maps and network plots</a><ul>
<li class="chapter" data-level="8.1" data-path="Connection.html"><a href="Connection.html#maps"><i class="fa fa-check"></i><b>8.1</b> Maps</a><ul>
<li class="chapter" data-level="8.1.1" data-path="Connection.html"><a href="Connection.html#choropleth"><i class="fa fa-check"></i><b>8.1.1</b> Choropleth</a></li>
<li class="chapter" data-level="8.1.2" data-path="Connection.html"><a href="Connection.html#county-map"><i class="fa fa-check"></i><b>8.1.2</b> County map</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Connection.html"><a href="Connection.html#us-county-small-multiples"><i class="fa fa-check"></i><b>8.2</b> US county small multiples</a></li>
<li class="chapter" data-level="8.3" data-path="Connection.html"><a href="Connection.html#world-migration"><i class="fa fa-check"></i><b>8.3</b> World migration</a></li>
<li class="chapter" data-level="8.4" data-path="Connection.html"><a href="Connection.html#networks"><i class="fa fa-check"></i><b>8.4</b> Networks</a><ul>
<li class="chapter" data-level="8.4.1" data-path="Connection.html"><a href="Connection.html#world-migration-network"><i class="fa fa-check"></i><b>8.4.1</b> World migration network</a></li>
<li class="chapter" data-level="8.4.2" data-path="Connection.html"><a href="Connection.html#hierarchy"><i class="fa fa-check"></i><b>8.4.2</b> Hierarchy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Tables.html"><a href="Tables.html"><i class="fa fa-check"></i><b>9</b> Graphical tables–interactive tables, highlights, and sparklines</a><ul>
<li class="chapter" data-level="9.1" data-path="Tables.html"><a href="Tables.html#heatmap-table"><i class="fa fa-check"></i><b>9.1</b> Heatmap table</a></li>
<li class="chapter" data-level="9.2" data-path="Tables.html"><a href="Tables.html#table-lens-with-a-integrated-bar"><i class="fa fa-check"></i><b>9.2</b> Table lens with a integrated bar</a></li>
<li class="chapter" data-level="9.3" data-path="Tables.html"><a href="Tables.html#sparkline"><i class="fa fa-check"></i><b>9.3</b> Sparkline</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Polishing.html"><a href="Polishing.html"><i class="fa fa-check"></i><b>10</b> Highlighting, annotating, and polishing graphs</a><ul>
<li class="chapter" data-level="10.1" data-path="Polishing.html"><a href="Polishing.html#highlighting-datapoints-to-make-a-point"><i class="fa fa-check"></i><b>10.1</b> Highlighting datapoints to make a point</a></li>
<li class="chapter" data-level="10.2" data-path="Polishing.html"><a href="Polishing.html#labeling-and-annotation"><i class="fa fa-check"></i><b>10.2</b> Labeling and annotation</a><ul>
<li class="chapter" data-level="10.2.1" data-path="Polishing.html"><a href="Polishing.html#annotating-data"><i class="fa fa-check"></i><b>10.2.1</b> Annotating data</a></li>
<li class="chapter" data-level="10.2.2" data-path="Polishing.html"><a href="Polishing.html#time-series-with-lines-labeled"><i class="fa fa-check"></i><b>10.2.2</b> Time series with lines labeled</a></li>
<li class="chapter" data-level="10.2.3" data-path="Polishing.html"><a href="Polishing.html#labelling-lines-bars-points-and-select-points"><i class="fa fa-check"></i><b>10.2.3</b> Labelling lines, bars, points, and select points</a></li>
<li class="chapter" data-level="10.2.4" data-path="Polishing.html"><a href="Polishing.html#meaningful-symbols"><i class="fa fa-check"></i><b>10.2.4</b> Meaningful symbols</a></li>
<li class="chapter" data-level="10.2.5" data-path="Polishing.html"><a href="Polishing.html#annotating-with-an-inset-plot"><i class="fa fa-check"></i><b>10.2.5</b> Annotating with an inset plot</a></li>
<li class="chapter" data-level="10.2.6" data-path="Polishing.html"><a href="Polishing.html#labels-on-lines"><i class="fa fa-check"></i><b>10.2.6</b> Labels on lines</a></li>
<li class="chapter" data-level="10.2.7" data-path="Polishing.html"><a href="Polishing.html#AddingRemovingLabels"><i class="fa fa-check"></i><b>10.2.7</b> Adding and removing labels: title, axis labels, and facet labels</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="Polishing.html"><a href="Polishing.html#position-legend"><i class="fa fa-check"></i><b>10.3</b> Position legend</a><ul>
<li class="chapter" data-level="10.3.1" data-path="Polishing.html"><a href="Polishing.html#remove-one-or-more-legends"><i class="fa fa-check"></i><b>10.3.1</b> Remove one or more legends</a></li>
<li class="chapter" data-level="10.3.2" data-path="Polishing.html"><a href="Polishing.html#setting-limits-on-axis-and-position-of-graph"><i class="fa fa-check"></i><b>10.3.2</b> Setting limits on axis and position of graph</a></li>
<li class="chapter" data-level="10.3.3" data-path="Polishing.html"><a href="Polishing.html#adjust-margin-between-points-and-edge-of-plot-area"><i class="fa fa-check"></i><b>10.3.3</b> Adjust margin between points and edge of plot area</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="Polishing.html"><a href="Polishing.html#color"><i class="fa fa-check"></i><b>10.4</b> Color</a><ul>
<li class="chapter" data-level="10.4.1" data-path="Polishing.html"><a href="Polishing.html#resources-to-explain-the-basis-form-color-choice"><i class="fa fa-check"></i><b>10.4.1</b> Resources to explain the basis form color choice</a></li>
<li class="chapter" data-level="10.4.2" data-path="Polishing.html"><a href="Polishing.html#large-and-small-area-colors"><i class="fa fa-check"></i><b>10.4.2</b> Large and small area colors</a></li>
<li class="chapter" data-level="10.4.3" data-path="Polishing.html"><a href="Polishing.html#color-for-large-and-small-areas"><i class="fa fa-check"></i><b>10.4.3</b> Color for large and small areas</a></li>
<li class="chapter" data-level="10.4.4" data-path="Polishing.html"><a href="Polishing.html#continuous-color-scales"><i class="fa fa-check"></i><b>10.4.4</b> Continuous color scales</a></li>
<li class="chapter" data-level="10.4.5" data-path="Polishing.html"><a href="Polishing.html#discrete-color-mappings"><i class="fa fa-check"></i><b>10.4.5</b> Discrete color mappings</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="Polishing.html"><a href="Polishing.html#themes-and-theme-options"><i class="fa fa-check"></i><b>10.5</b> Themes and theme options</a><ul>
<li class="chapter" data-level="10.5.1" data-path="Polishing.html"><a href="Polishing.html#remove-chart-details"><i class="fa fa-check"></i><b>10.5.1</b> Remove chart details</a></li>
<li class="chapter" data-level="10.5.2" data-path="Polishing.html"><a href="Polishing.html#predefined-themes-adjust-many-elements"><i class="fa fa-check"></i><b>10.5.2</b> Predefined themes adjust many elements</a></li>
<li class="chapter" data-level="10.5.3" data-path="Polishing.html"><a href="Polishing.html#ordering-theme-layers"><i class="fa fa-check"></i><b>10.5.3</b> Ordering theme layers</a></li>
<li class="chapter" data-level="10.5.4" data-path="Polishing.html"><a href="Polishing.html#pre-set-theme-options"><i class="fa fa-check"></i><b>10.5.4</b> Pre-set theme options</a></li>
<li class="chapter" data-level="10.5.5" data-path="Polishing.html"><a href="Polishing.html#themes-form-other-packages"><i class="fa fa-check"></i><b>10.5.5</b> Themes form other packages</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="Polishing.html"><a href="Polishing.html#saving-and-printing-plots-to-include-in-documents"><i class="fa fa-check"></i><b>10.6</b> Saving and printing plots to include in documents</a><ul>
<li class="chapter" data-level="10.6.1" data-path="Polishing.html"><a href="Polishing.html#png-jpeg-pdf-and-svg"><i class="fa fa-check"></i><b>10.6.1</b> PNG, JPEG, PDF, and SVG</a></li>
<li class="chapter" data-level="10.6.2" data-path="Polishing.html"><a href="Polishing.html#combining-multiple-graphs-for-publication"><i class="fa fa-check"></i><b>10.6.2</b> Combining multiple graphs for publication</a></li>
<li class="chapter" data-level="10.6.3" data-path="Polishing.html"><a href="Polishing.html#faceted-pagination"><i class="fa fa-check"></i><b>10.6.3</b> Faceted pagination</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Interaction.html"><a href="Interaction.html"><i class="fa fa-check"></i><b>11</b> Interaction–zoom, annotate, highlight</a></li>
<li class="chapter" data-level="12" data-path="shinyadvanced-interactive-graphics.html"><a href="shinyadvanced-interactive-graphics.html"><i class="fa fa-check"></i><b>12</b> Shiny–Advanced interactive graphics</a></li>
<li class="appendix"><span><b>Appendix</b></span><ul>
<li class="chapter" data-level="A.1" data-path="07-fluctuation.html"><a href="#data-sources-1"><i class="fa fa-check"></i><b>A.1</b> Data sources</a></li>
<li class="chapter" data-level="A.2" data-path="shinyadvanced-interactive-graphics.html"><a href="shinyadvanced-interactive-graphics.html#visualization-resources"><i class="fa fa-check"></i><b>A.2</b> Visualization resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Interactive data visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Fluctuation" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Fluctuation–timelines</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<div id="multiple-time-series" class="section level2">
<h2><span class="header-section-number">7.1</span> Multiple time series</h2>
<p>two lines on one plot and problems faceting</p>
</div>
<div id="time-series-with-reference-line" class="section level2">
<h2><span class="header-section-number">7.2</span> Time series with reference line</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Reference lines in time series
belts =<span class="st"> </span>Seatbelts
belts.df =<span class="st"> </span><span class="kw">as.data.frame</span>(
  <span class="kw">cbind</span>(<span class="dt">Year =</span> <span class="kw">round</span>(<span class="kw">trunc</span>(<span class="kw">time</span>(belts)), <span class="dv">1</span>),
        <span class="dt">Month =</span> <span class="kw">cycle</span>(belts),
        belts))

belts.df<span class="op">$</span>belts.law =<span class="st"> </span><span class="kw">as.factor</span>(belts.df<span class="op">$</span>belts.law)
belts.DriversKilled.bymonth =<span class="st"> </span>belts.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Month) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean.DriversKilled =</span> <span class="kw">mean</span>(belts.DriversKilled))

<span class="kw">ggplot</span>(belts.df, <span class="kw">aes</span>(<span class="dt">x =</span> Month, <span class="dt">y =</span> belts.DriversKilled)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> belts.law, <span class="dt">group =</span> Year)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">data =</span> belts.DriversKilled.bymonth,
            <span class="kw">aes</span>(<span class="dt">x =</span> Month, <span class="dt">y =</span> mean.DriversKilled)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Year, <span class="dt">nrow=</span> <span class="dv">4</span>, <span class="dt">ncol=</span> <span class="dv">4</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>(),
        <span class="dt">axis.ticks.x =</span> <span class="kw">element_blank</span>(),
        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/facet-timeseries-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">belts.df =<span class="st"> </span>belts.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Year) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">summer.s=</span>Month[Month<span class="op">==</span><span class="dv">5</span>], <span class="dt">summer.e=</span>Month[Month<span class="op">==</span><span class="dv">9</span>])

<span class="kw">ggplot</span>(belts.df, <span class="kw">aes</span>(Month, belts.DriversKilled)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_rect</span>(<span class="kw">aes</span>(<span class="dt">xmin=</span>summer.s, <span class="dt">xmax=</span>summer.e, <span class="dt">ymin=</span><span class="op">-</span><span class="ot">Inf</span>, <span class="dt">ymax=</span><span class="op">+</span><span class="ot">Inf</span>),
                 <span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_path</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> belts.law, <span class="dt">size =</span> belts.PetrolPrice, <span class="dt">group =</span> Year), <span class="dt">lineend =</span> <span class="st">&quot;round&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">data =</span> belts.DriversKilled.bymonth,  <span class="kw">aes</span>(<span class="dt">x =</span> Month, <span class="dt">y =</span> mean.DriversKilled)) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Year, <span class="dt">nrow=</span> <span class="dv">4</span>, <span class="dt">ncol=</span> <span class="dv">4</span>) </code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="cycle-plot" class="section level2">
<h2><span class="header-section-number">7.3</span> Cycle plot</h2>
<p>Cycle plot make comparions between months easy. Showing bars rather than lines helps focus attenton the specitic years when the seatbelt law was enacted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hline.df &lt;-<span class="st"> </span>belts.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(Month) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">m.killed =</span> <span class="kw">mean</span>(belts.DriversKilled))


<span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_path</span>(<span class="dt">data =</span> belts.df, <span class="kw">aes</span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> belts.DriversKilled, <span class="dt">group =</span> Month, <span class="dt">color =</span> belts.law), <span class="dt">alpha =</span> .<span class="dv">6</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>( <span class="dt">data =</span> hline.df, <span class="kw">aes</span>(<span class="dt">yintercept =</span> m.killed), <span class="dt">colour =</span> <span class="st">&quot;grey15&quot;</span>, <span class="dt">size =</span> <span class="fl">1.5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>Month) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/cycle-plot-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">data =</span> belts.df, <span class="kw">aes</span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> belts.DriversKilled, <span class="dt">group =</span> Month, <span class="dt">fill =</span> belts.law), <span class="dt">alpha =</span> .<span class="dv">6</span>, 
    <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>( <span class="dt">data =</span> hline.df, <span class="kw">aes</span>(<span class="dt">yintercept =</span> m.killed), <span class="dt">colour =</span> <span class="st">&quot;grey15&quot;</span>, <span class="dt">size =</span> <span class="fl">1.5</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(<span class="op">~</span>Month) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/cycle-plot-2.png" width="672" /></p>
</div>
<div id="step-graph" class="section level2">
<h2><span class="header-section-number">7.4</span> Step graph</h2>
<p>TODO</p>
</div>
<div id="faceted-zoom" class="section level2">
<h2><span class="header-section-number">7.5</span> Faceted zoom</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggforce)
## Examples from: https://cran.r-project.org/web/packages/ggforce/vignettes/Visual_Guide.html

<span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(Petal.Length, Petal.Width, <span class="dt">colour =</span> Species)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">facet_zoom</span>(<span class="dt">x =</span> Species <span class="op">==</span><span class="st"> &quot;versicolor&quot;</span>)<span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;ggforce: facet zoom&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/facet-zoom-1.png" width="672" /></p>
</div>
<div id="ridge-plot" class="section level2">
<h2><span class="header-section-number">7.6</span> Ridge plot</h2>
<p><a href="https://cran.r-project.org/web/packages/ggridges/vignettes/gallery.html" class="uri">https://cran.r-project.org/web/packages/ggridges/vignettes/gallery.html</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Ridge plot
<span class="kw">library</span>(ggridges)</code></pre></div>
<pre><code>## 
## Attaching package: &#39;ggridges&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     scale_discrete_manual</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2movies)

movies <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(year<span class="op">&gt;</span><span class="dv">1912</span>, length<span class="op">&lt;</span><span class="dv">250</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> length, <span class="dt">y =</span> year, <span class="dt">group =</span> year)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_density_ridges</span>(<span class="dt">scale =</span> <span class="dv">10</span>, <span class="dt">size =</span> <span class="fl">0.25</span>, <span class="dt">rel_min_height =</span> <span class="fl">0.03</span>, <span class="dt">alpha=</span>.<span class="dv">75</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">250</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_y_reverse</span>(<span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">2000</span>, <span class="dv">1980</span>, <span class="dv">1960</span>, <span class="dv">1940</span>, <span class="dv">1920</span>, <span class="dv">1900</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="fl">0.01</span>, <span class="dv">0</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_ridges</span>()</code></pre></div>
<pre><code>## Picking joint bandwidth of 6.89</code></pre>
<p><img src="visualizationwithggplot_files/figure-html/ridge-plot-1.png" width="672" /></p>
</div>
<div id="stacked-area-and-line-graphs" class="section level2">
<h2><span class="header-section-number">7.7</span> Stacked area and line graphs</h2>
<p>Challenges of comparing individual contributions, ease of seeing combined effect Stream plot</p>
<p>“Streamgraphs are a generalization of stacked area graphs where the baseline is free. By shifting the baseline, it is possible to minimize the change in slope (or wiggle) in individual series, thereby making it easier to perceive the thickness of any given layer across the data. Byron &amp; Wattenberg describe several streamgraph algorithms in ‘Stacked Graphs—Geometry &amp; Aesthetics<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>’”<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<p>“A steamgraph is a more aesthetically appealing version of a stacked area chart. It tries to highlight the changes in the data by placing the groups with the most variance on the edges, and the groups with the least variance towards the centre. This feature in conjunction with the centred alignment of each of the contributing areas makes it easier for the viewer to compare the contribution of any of the components across time.”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#devtools::install_github(&#39;Ather-Energy/ggTimeSeries&#39;)</span>
<span class="kw">library</span>(babynames)
<span class="kw">library</span>(ggTimeSeries)

names.df =<span class="st"> </span>babynames <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">grepl</span>(<span class="st">&quot;^Jo&quot;</span>, name)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(year, name) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">tally</span>(<span class="dt">wt=</span>n)
##TODO smooth sequence

<span class="kw">ggplot</span>(names.df, <span class="kw">aes</span>(year, <span class="dt">y =</span> nn, <span class="dt">group =</span> name, <span class="dt">fill =</span> name)) <span class="op">+</span>
<span class="st">  </span><span class="kw">stat_steamgraph</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>, 
        <span class="dt">axis.text.y=</span><span class="kw">element_blank</span>())</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/streamplot-1.png" width="672" /></p>
</div>
<div id="temporal-heatmap" class="section level2">
<h2><span class="header-section-number">7.8</span> Temporal heatmap</h2>
<p>TODO replace with rain data for SEA from <a href="https://www.r-bloggers.com/ggplot2-time-series-heatmaps-revisited-in-the-tidyverse/" class="uri">https://www.r-bloggers.com/ggplot2-time-series-heatmaps-revisited-in-the-tidyverse/</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The core idea is to transform the data such that one can</span>
<span class="co"># plot &quot;Value&quot; as a function of &quot;WeekOfMonth&quot; versus &quot;DayOfWeek&quot;</span>
<span class="co"># and facet this Year versus Month</span>

xts_heatmap &lt;-<span class="st"> </span><span class="cf">function</span>(x){
  <span class="kw">data.frame</span>(<span class="dt">Date=</span><span class="kw">as.Date</span>(<span class="kw">index</span>(x)), x[,<span class="dv">1</span>]) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">setNames</span>(<span class="kw">c</span>(<span class="st">&quot;Date&quot;</span>,<span class="st">&quot;Value&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(
      <span class="dt">Year=</span>lubridate<span class="op">::</span><span class="kw">year</span>(Date),
      <span class="dt">Month=</span>lubridate<span class="op">::</span><span class="kw">month</span>(Date),
      <span class="co"># I use factors here to get plot ordering in the right order</span>
      <span class="co"># without worrying about locale</span>
      <span class="dt">MonthTag=</span><span class="kw">factor</span>(Month,<span class="dt">levels=</span><span class="kw">as.character</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>),
                      <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;Jan&quot;</span>,<span class="st">&quot;Feb&quot;</span>,<span class="st">&quot;Mar&quot;</span>,<span class="st">&quot;Apr&quot;</span>,<span class="st">&quot;May&quot;</span>,<span class="st">&quot;Jun&quot;</span>,<span class="st">&quot;Jul&quot;</span>,<span class="st">&quot;Aug&quot;</span>,<span class="st">&quot;Sep&quot;</span>,<span class="st">&quot;Oct&quot;</span>,<span class="st">&quot;Nov&quot;</span>,<span class="st">&quot;Dec&quot;</span>),<span class="dt">ordered=</span><span class="ot">TRUE</span>),
      <span class="co"># week start on Monday in my world</span>
      <span class="dt">Wday=</span>lubridate<span class="op">::</span><span class="kw">wday</span>(Date,<span class="dt">week_start=</span><span class="dv">1</span>),
      <span class="co"># the rev reverse here is just for the plotting order</span>
      <span class="dt">WdayTag=</span><span class="kw">factor</span>(Wday,<span class="dt">levels=</span><span class="kw">rev</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>),<span class="dt">labels=</span><span class="kw">rev</span>(<span class="kw">c</span>(<span class="st">&quot;Mon&quot;</span>,<span class="st">&quot;Tue&quot;</span>,<span class="st">&quot;Wed&quot;</span>,<span class="st">&quot;Thu&quot;</span>,<span class="st">&quot;Fri&quot;</span>,<span class="st">&quot;Sat&quot;</span>,<span class="st">&quot;Sun&quot;</span>)),<span class="dt">ordered=</span><span class="ot">TRUE</span>),
      <span class="dt">Week=</span><span class="kw">as.numeric</span>(<span class="kw">format</span>(Date,<span class="st">&quot;%W&quot;</span>))
    ) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="co"># ok here we group by year and month and then calculate the week of the month </span>
<span class="st">    </span><span class="co"># we are currently in</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(Year,Month) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Wmonth=</span><span class="dv">1</span><span class="op">+</span>Week<span class="op">-</span><span class="kw">min</span>(Week)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Wmonth, <span class="dt">y=</span>WdayTag, <span class="dt">fill =</span> Value)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_tile</span>(<span class="dt">colour =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">facet_grid</span>(Year<span class="op">~</span>MonthTag) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">scale_fill_gradient</span>(<span class="dt">low=</span><span class="st">&quot;red&quot;</span>, <span class="dt">high=</span><span class="st">&quot;yellow&quot;</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">x=</span><span class="st">&quot;Week of Month&quot;</span>, <span class="dt">y=</span><span class="ot">NULL</span>)
}
  
<span class="kw">require</span>(quantmod)</code></pre></div>
<pre><code>## Loading required package: quantmod</code></pre>
<pre><code>## Loading required package: xts</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre><code>## 
## Attaching package: &#39;xts&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     first, last</code></pre>
<pre><code>## Loading required package: TTR</code></pre>
<pre><code>## Version 0.4-0 included new data defaults. See ?getSymbols.
## Learn from a quantmod author: https://www.datacamp.com/courses/importing-and-managing-financial-data-in-r</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Download some Data, e.g. the CBOE VIX </span>
quantmod<span class="op">::</span><span class="kw">getSymbols</span>(<span class="st">&quot;^VIX&quot;</span>,<span class="dt">src=</span><span class="st">&quot;yahoo&quot;</span>)</code></pre></div>
<pre><code>## &#39;getSymbols&#39; currently uses auto.assign=TRUE by default, but will
## use auto.assign=FALSE in 0.5-0. You will still be able to use
## &#39;loadSymbols&#39; to automatically load data. getOption(&quot;getSymbols.env&quot;)
## and getOption(&quot;getSymbols.auto.assign&quot;) will still be checked for
## alternate defaults.
## 
## This message is shown once per session and may be disabled by setting 
## options(&quot;getSymbols.warning4.0&quot;=FALSE). See ?getSymbols for details.</code></pre>
<pre><code>## 
## WARNING: There have been significant changes to Yahoo Finance data.
## Please see the Warning section of &#39;?getSymbols.yahoo&#39; for details.
## 
## This message is shown once per session and may be disabled by setting
## options(&quot;getSymbols.yahoo.warning&quot;=FALSE).</code></pre>
<pre><code>## [1] &quot;VIX&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xts_heatmap</span>(<span class="kw">Cl</span>(VIX)) <span class="op">+</span><span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Heatmap of VIX&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/temporal-heatmap-1.png" width="672" /></p>


</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="http://www.leebyron.com/else/streamgraph/" class="uri">http://www.leebyron.com/else/streamgraph/</a><a href="Fluctuation.html#fnref1">↩</a></p></li>
<li id="fn2"><p>Bostock. <a href="http://bl.ocks.org/mbostock/4060954" class="uri">http://bl.ocks.org/mbostock/4060954</a><a href="Fluctuation.html#fnref2">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Proportion.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Connection.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jdlee/interactive-data-visualization/blob/master/07-fluctuation.Rmd",
"text": "Edit"
},
"download": ["visualizationwithggplot.pdf", "visualizationwithggplot.epub"],
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
