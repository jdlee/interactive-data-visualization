<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Interactive data visualization</title>
  <meta name="description" content="A book of ggplot examples">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Interactive data visualization" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/Minard_timeline_map.png" />
  <meta property="og:description" content="A book of ggplot examples" />
  <meta name="github-repo" content="jdlee/ggplot-examples" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Interactive data visualization" />
  
  <meta name="twitter:description" content="A book of ggplot examples" />
  <meta name="twitter:image" content="images/Minard_timeline_map.png" />

<meta name="author" content="John D. Lee">


<meta name="date" content="2018-05-18">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="Comparison.html">
<link rel="next" href="Fluctuation.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding/datatables.js"></script>
<link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk/js/crosstalk.min.js"></script>
<link href="libs/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider/jquery.nouislider.min.js"></script>
<link href="libs/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize/selectize.min.js"></script>
<script src="libs/d3/d3.min.js"></script>
<script src="libs/d3-lasso/d3-lasso.min.js"></script>
<link href="libs/ggiraph/styles.css" rel="stylesheet" />
<script src="libs/ggiraph/ggiraph_utils.js"></script>
<script src="libs/ggiraph/ggiraph_over_effect.js"></script>
<script src="libs/ggiraph/ggiraph_zoom.js"></script>
<script src="libs/ggiraph/ggiraph_tooltip.js"></script>
<script src="libs/ggiraph/ggiraph_selector.js"></script>
<script src="libs/ggiraph-binding/ggiraph.js"></script>
<script src="libs/svg_6/scripts_svg_6.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Interactive Data Visualization in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-read-this-book"><i class="fa fa-check"></i>Why read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-the-book"><i class="fa fa-check"></i>Structure of the book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="1" data-path="Introduction.html"><a href="Introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction: Purposes, questions, and audiences</a><ul>
<li class="chapter" data-level="1.1" data-path="Introduction.html"><a href="Introduction.html#seeing-meaning-rather-than-numbers"><i class="fa fa-check"></i><b>1.1</b> Seeing meaning rather than numbers</a></li>
<li class="chapter" data-level="1.2" data-path="Introduction.html"><a href="Introduction.html#seeing-more-than-summary-statistics"><i class="fa fa-check"></i><b>1.2</b> Seeing more than summary statistics</a></li>
<li class="chapter" data-level="1.3" data-path="Introduction.html"><a href="Introduction.html#purpose-and-audience-of-visualizations"><i class="fa fa-check"></i><b>1.3</b> Purpose and audience of visualizations</a></li>
<li class="chapter" data-level="1.4" data-path="Introduction.html"><a href="Introduction.html#what-question-to-answer"><i class="fa fa-check"></i><b>1.4</b> What question to answer?</a></li>
<li class="chapter" data-level="1.5" data-path="Introduction.html"><a href="Introduction.html#storytelling-with-graphics"><i class="fa fa-check"></i><b>1.5</b> Storytelling with graphics</a></li>
<li class="chapter" data-level="1.6" data-path="Introduction.html"><a href="Introduction.html#data"><i class="fa fa-check"></i><b>1.6</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Principles.html"><a href="Principles.html"><i class="fa fa-check"></i><b>2</b> Visualization types and principles</a><ul>
<li class="chapter" data-level="2.1" data-path="Principles.html"><a href="Principles.html#pairing-questions-and-graph-types"><i class="fa fa-check"></i><b>2.1</b> Pairing questions and graph types</a></li>
<li class="chapter" data-level="2.2" data-path="Principles.html"><a href="Principles.html#visual-perception-for-visualization"><i class="fa fa-check"></i><b>2.2</b> Visual perception for visualization</a><ul>
<li class="chapter" data-level="2.2.1" data-path="Principles.html"><a href="Principles.html#types-of-cognitive-processes-to-be-supported"><i class="fa fa-check"></i><b>2.2.1</b> Types of cognitive processes to be supported</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="Principles.html"><a href="Principles.html#principles-from-general-to-specific"><i class="fa fa-check"></i><b>2.3</b> Principles from general to specific</a></li>
<li class="chapter" data-level="2.4" data-path="Principles.html"><a href="Principles.html#mapping-typese-of-variables-to-graph-features"><i class="fa fa-check"></i><b>2.4</b> Mapping typese of variables to graph features</a></li>
<li class="chapter" data-level="2.5" data-path="Principles.html"><a href="Principles.html#principles"><i class="fa fa-check"></i><b>2.5</b> Principles</a><ul>
<li class="chapter" data-level="2.5.1" data-path="Principles.html"><a href="Principles.html#proximity"><i class="fa fa-check"></i><b>2.5.1</b> Proximity</a></li>
<li class="chapter" data-level="2.5.2" data-path="Principles.html"><a href="Principles.html#legibility"><i class="fa fa-check"></i><b>2.5.2</b> Legibility</a></li>
<li class="chapter" data-level="2.5.3" data-path="Principles.html"><a href="Principles.html#clutter"><i class="fa fa-check"></i><b>2.5.3</b> Clutter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Association.html"><a href="Association.html"><i class="fa fa-check"></i><b>3</b> Association–scatterplots</a><ul>
<li class="chapter" data-level="3.1" data-path="Association.html"><a href="Association.html#basic-elements-of-the-grammar-of-graphics"><i class="fa fa-check"></i><b>3.1</b> Basic elements of the grammar of graphics</a></li>
<li class="chapter" data-level="3.2" data-path="Association.html"><a href="Association.html#simple-scatterplot"><i class="fa fa-check"></i><b>3.2</b> Simple scatterplot</a></li>
<li class="chapter" data-level="3.3" data-path="Association.html"><a href="Association.html#scatterplot-with-additional-mappings"><i class="fa fa-check"></i><b>3.3</b> Scatterplot with additional mappings</a></li>
<li class="chapter" data-level="3.4" data-path="Association.html"><a href="Association.html#scatterplot-with-linear-and-loess-fit"><i class="fa fa-check"></i><b>3.4</b> Scatterplot with linear and loess fit</a></li>
<li class="chapter" data-level="3.5" data-path="Association.html"><a href="Association.html#global-and-local-regression"><i class="fa fa-check"></i><b>3.5</b> Global and local regression</a></li>
<li class="chapter" data-level="3.6" data-path="Association.html"><a href="Association.html#quantile-regression-and-other-functional-relationships"><i class="fa fa-check"></i><b>3.6</b> Quantile regression and other functional relationships</a></li>
<li class="chapter" data-level="3.7" data-path="Association.html"><a href="Association.html#scatterplot-with-overplotting-mitigation"><i class="fa fa-check"></i><b>3.7</b> Scatterplot with overplotting mitigation</a></li>
<li class="chapter" data-level="3.8" data-path="Association.html"><a href="Association.html#scatterplot-matrix"><i class="fa fa-check"></i><b>3.8</b> Scatterplot matrix</a></li>
<li class="chapter" data-level="3.9" data-path="Association.html"><a href="Association.html#categorical-scatterplot"><i class="fa fa-check"></i><b>3.9</b> Categorical scatterplot</a></li>
<li class="chapter" data-level="3.10" data-path="Association.html"><a href="Association.html#scatterplot-with-regression-equation-and-marginal-distributions"><i class="fa fa-check"></i><b>3.10</b> Scatterplot with regression equation and marginal distributions</a></li>
<li class="chapter" data-level="3.11" data-path="Association.html"><a href="Association.html#table-lens"><i class="fa fa-check"></i><b>3.11</b> Table lens</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Distribution.html"><a href="Distribution.html"><i class="fa fa-check"></i><b>4</b> Distribution–histograms and density plots</a><ul>
<li class="chapter" data-level="4.1" data-path="Distribution.html"><a href="Distribution.html#histograms-and-bin-choice"><i class="fa fa-check"></i><b>4.1</b> Histograms and bin choice</a></li>
<li class="chapter" data-level="4.2" data-path="Distribution.html"><a href="Distribution.html#histogram-density-overlay-and-normal-overlay"><i class="fa fa-check"></i><b>4.2</b> Histogram, density overlay, and normal overlay</a></li>
<li class="chapter" data-level="4.3" data-path="Distribution.html"><a href="Distribution.html#cummulative-density"><i class="fa fa-check"></i><b>4.3</b> Cummulative density</a></li>
<li class="chapter" data-level="4.4" data-path="Distribution.html"><a href="Distribution.html#distribution-2-d-distribution-and-overplotting-revisited"><i class="fa fa-check"></i><b>4.4</b> Distribution: 2-D distribution and overplotting revisited</a></li>
<li class="chapter" data-level="4.5" data-path="Distribution.html"><a href="Distribution.html#histogram-with-density-and-median-reference-line"><i class="fa fa-check"></i><b>4.5</b> Histogram with density and median reference line</a></li>
<li class="chapter" data-level="4.6" data-path="Distribution.html"><a href="Distribution.html#ridge-plot"><i class="fa fa-check"></i><b>4.6</b> Ridge plot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Comparison.html"><a href="Comparison.html"><i class="fa fa-check"></i><b>5</b> Comparison–barchart and boxplots</a><ul>
<li class="chapter" data-level="5.1" data-path="Comparison.html"><a href="Comparison.html#deviation-chart-bar-above-and-below-zero-or-average"><i class="fa fa-check"></i><b>5.1</b> Deviation chart: Bar above and below zero or average</a></li>
<li class="chapter" data-level="5.2" data-path="Comparison.html"><a href="Comparison.html#graph-considerations-for-communication-aggregation-abstraction-complexity"><i class="fa fa-check"></i><b>5.2</b> Graph considerations for communication: aggregation, abstraction, complexity</a></li>
<li class="chapter" data-level="5.3" data-path="Comparison.html"><a href="Comparison.html#dotplot-and-offset-range-plot"><i class="fa fa-check"></i><b>5.3</b> dotplot and offset range plot</a></li>
<li class="chapter" data-level="5.4" data-path="Comparison.html"><a href="Comparison.html#compares-the-empirical-and-theoretical-distribution-summary"><i class="fa fa-check"></i><b>5.4</b> Compares the empirical and theoretical distribution summary</a></li>
<li class="chapter" data-level="5.5" data-path="Comparison.html"><a href="Comparison.html#statistical-significance-in-context"><i class="fa fa-check"></i><b>5.5</b> Statistical significance in context</a></li>
<li class="chapter" data-level="5.6" data-path="Comparison.html"><a href="Comparison.html#tufte-boxplot"><i class="fa fa-check"></i><b>5.6</b> Tufte boxplot</a></li>
<li class="chapter" data-level="5.7" data-path="Comparison.html"><a href="Comparison.html#dot-plots-and-reordering"><i class="fa fa-check"></i><b>5.7</b> Dot plots and reordering</a></li>
<li class="chapter" data-level="5.8" data-path="Comparison.html"><a href="Comparison.html#gliphs-chernof-face-and-radar-plots"><i class="fa fa-check"></i><b>5.8</b> Gliphs: Chernof face and radar plots</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Proportion.html"><a href="Proportion.html"><i class="fa fa-check"></i><b>6</b> Proportion–Pie charts and pareto plots</a><ul>
<li class="chapter" data-level="6.1" data-path="Proportion.html"><a href="Proportion.html#pie-and-bar-chart"><i class="fa fa-check"></i><b>6.1</b> Pie and bar chart</a></li>
<li class="chapter" data-level="6.2" data-path="Proportion.html"><a href="Proportion.html#pareto-plot-whole-part-and-and-ranking"><i class="fa fa-check"></i><b>6.2</b> Pareto plot: Whole part and and ranking</a></li>
<li class="chapter" data-level="6.3" data-path="Proportion.html"><a href="Proportion.html#stacked-bar-chart"><i class="fa fa-check"></i><b>6.3</b> Stacked bar chart</a></li>
<li class="chapter" data-level="6.4" data-path="Proportion.html"><a href="Proportion.html#faceted-bar-chart-with-overall-reference-distribution"><i class="fa fa-check"></i><b>6.4</b> Faceted Bar chart with overall reference distribution</a></li>
<li class="chapter" data-level="6.5" data-path="Proportion.html"><a href="Proportion.html#rose-or-coxcomb-plots"><i class="fa fa-check"></i><b>6.5</b> Rose or Coxcomb plots</a></li>
<li class="chapter" data-level="6.6" data-path="Proportion.html"><a href="Proportion.html#stacked-dodged-and-opposed-bar-chart"><i class="fa fa-check"></i><b>6.6</b> Stacked, dodged and opposed bar chart</a></li>
<li class="chapter" data-level="6.7" data-path="Proportion.html"><a href="Proportion.html#treemaps-for-whole-part-of-hierarchy"><i class="fa fa-check"></i><b>6.7</b> Treemaps for whole-part of hierarchy</a></li>
<li class="chapter" data-level="6.8" data-path="Proportion.html"><a href="Proportion.html#circle-packing"><i class="fa fa-check"></i><b>6.8</b> Circle packing</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Fluctuation.html"><a href="Fluctuation.html"><i class="fa fa-check"></i><b>7</b> Fluctuation–timelines</a><ul>
<li class="chapter" data-level="7.1" data-path="Fluctuation.html"><a href="Fluctuation.html#time-series-with-reference-line"><i class="fa fa-check"></i><b>7.1</b> Time series with reference line</a></li>
<li class="chapter" data-level="7.2" data-path="Fluctuation.html"><a href="Fluctuation.html#cycle-plot"><i class="fa fa-check"></i><b>7.2</b> Cycle plot</a></li>
<li class="chapter" data-level="7.3" data-path="Fluctuation.html"><a href="Fluctuation.html#time-series-with-lines-labeled"><i class="fa fa-check"></i><b>7.3</b> Time series with lines labeled</a></li>
<li class="chapter" data-level="7.4" data-path="Fluctuation.html"><a href="Fluctuation.html#faceted-zoom"><i class="fa fa-check"></i><b>7.4</b> Faceted zoom</a></li>
<li class="chapter" data-level="7.5" data-path="Fluctuation.html"><a href="Fluctuation.html#ridge-plot-1"><i class="fa fa-check"></i><b>7.5</b> Ridge plot</a></li>
<li class="chapter" data-level="7.6" data-path="Fluctuation.html"><a href="Fluctuation.html#stacked-area-and-line-graphs"><i class="fa fa-check"></i><b>7.6</b> Stacked area and line graphs</a></li>
<li class="chapter" data-level="7.7" data-path="Fluctuation.html"><a href="Fluctuation.html#temporal-heatmap"><i class="fa fa-check"></i><b>7.7</b> Temporal heatmap</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Connection.html"><a href="Connection.html"><i class="fa fa-check"></i><b>8</b> Connection–maps and network plots</a><ul>
<li class="chapter" data-level="8.1" data-path="Connection.html"><a href="Connection.html#maps"><i class="fa fa-check"></i><b>8.1</b> Maps</a><ul>
<li class="chapter" data-level="8.1.1" data-path="Connection.html"><a href="Connection.html#choropleth"><i class="fa fa-check"></i><b>8.1.1</b> Choropleth</a></li>
<li class="chapter" data-level="8.1.2" data-path="Connection.html"><a href="Connection.html#county-map"><i class="fa fa-check"></i><b>8.1.2</b> County map</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Connection.html"><a href="Connection.html#us-county-small-multiples"><i class="fa fa-check"></i><b>8.2</b> US county small multiples</a></li>
<li class="chapter" data-level="8.3" data-path="Connection.html"><a href="Connection.html#world-migration"><i class="fa fa-check"></i><b>8.3</b> World migration</a></li>
<li class="chapter" data-level="8.4" data-path="Connection.html"><a href="Connection.html#networks"><i class="fa fa-check"></i><b>8.4</b> Networks</a><ul>
<li class="chapter" data-level="8.4.1" data-path="Connection.html"><a href="Connection.html#world-migration-network"><i class="fa fa-check"></i><b>8.4.1</b> World migration network</a></li>
<li class="chapter" data-level="8.4.2" data-path="Connection.html"><a href="Connection.html#hierarchy"><i class="fa fa-check"></i><b>8.4.2</b> Hierarchy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Tables.html"><a href="Tables.html"><i class="fa fa-check"></i><b>9</b> Graphical tables–interactive tables, highlights, and sparklines</a><ul>
<li class="chapter" data-level="9.1" data-path="Tables.html"><a href="Tables.html#heatmap-table"><i class="fa fa-check"></i><b>9.1</b> Heatmap table</a></li>
<li class="chapter" data-level="9.2" data-path="Tables.html"><a href="Tables.html#table-lens-with-a-integrated-bar"><i class="fa fa-check"></i><b>9.2</b> Table lens with a integrated bar</a></li>
<li class="chapter" data-level="9.3" data-path="Tables.html"><a href="Tables.html#sparkline"><i class="fa fa-check"></i><b>9.3</b> Sparkline</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Polishing.html"><a href="Polishing.html"><i class="fa fa-check"></i><b>10</b> Polishing graph for publication</a><ul>
<li class="chapter" data-level="10.1" data-path="Polishing.html"><a href="Polishing.html#colour"><i class="fa fa-check"></i><b>10.1</b> Colour</a></li>
<li class="chapter" data-level="10.2" data-path="Polishing.html"><a href="Polishing.html#scales-beyond-color"><i class="fa fa-check"></i><b>10.2</b> Scales beyond color</a></li>
<li class="chapter" data-level="10.3" data-path="Polishing.html"><a href="Polishing.html#themes-and-formatting"><i class="fa fa-check"></i><b>10.3</b> Themes and formatting</a></li>
<li class="chapter" data-level="10.4" data-path="Polishing.html"><a href="Polishing.html#saving-plots"><i class="fa fa-check"></i><b>10.4</b> Saving plots</a><ul>
<li class="chapter" data-level="10.4.1" data-path="Polishing.html"><a href="Polishing.html#titles-labels"><i class="fa fa-check"></i><b>10.4.1</b> Titles labels</a></li>
<li class="chapter" data-level="10.4.2" data-path="Polishing.html"><a href="Polishing.html#annotations-of-data"><i class="fa fa-check"></i><b>10.4.2</b> Annotations of data</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="Polishing.html"><a href="Polishing.html#color"><i class="fa fa-check"></i><b>10.5</b> Color</a><ul>
<li class="chapter" data-level="10.5.1" data-path="Polishing.html"><a href="Polishing.html#resources-to-explain-the-basis-form-color-choice"><i class="fa fa-check"></i><b>10.5.1</b> Resources to explain the basis form color choice</a></li>
<li class="chapter" data-level="10.5.2" data-path="Polishing.html"><a href="Polishing.html#large-and-small-area-colors"><i class="fa fa-check"></i><b>10.5.2</b> Large and small area colors</a></li>
<li class="chapter" data-level="10.5.3" data-path="Polishing.html"><a href="Polishing.html#color-for-large-and-small-areas"><i class="fa fa-check"></i><b>10.5.3</b> Color for large and small areas</a></li>
<li class="chapter" data-level="10.5.4" data-path="Polishing.html"><a href="Polishing.html#continuous-color-scales"><i class="fa fa-check"></i><b>10.5.4</b> Continuous color scales</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="Polishing.html"><a href="Polishing.html#themes-and-theme-options"><i class="fa fa-check"></i><b>10.6</b> Themes and theme options</a><ul>
<li class="chapter" data-level="10.6.1" data-path="Polishing.html"><a href="Polishing.html#ordering-theme-layers"><i class="fa fa-check"></i><b>10.6.1</b> Ordering theme layers</a></li>
<li class="chapter" data-level="10.6.2" data-path="Polishing.html"><a href="Polishing.html#pre-set-theme-options"><i class="fa fa-check"></i><b>10.6.2</b> Pre-set theme options</a></li>
<li class="chapter" data-level="10.6.3" data-path="Polishing.html"><a href="Polishing.html#themes-form-other-packages"><i class="fa fa-check"></i><b>10.6.3</b> Themes form other packages</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="Polishing.html"><a href="Polishing.html#saving-and-printing-plots-to-include-in-documents"><i class="fa fa-check"></i><b>10.7</b> Saving and printing plots to include in documents</a></li>
<li class="chapter" data-level="10.8" data-path="Polishing.html"><a href="Polishing.html#faceted-pagination"><i class="fa fa-check"></i><b>10.8</b> Faceted pagination</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Interaction.html"><a href="Interaction.html"><i class="fa fa-check"></i><b>11</b> Interaction–zoom, annotate, highlight</a></li>
<li class="chapter" data-level="12" data-path="shinyadvanced-interactive-graphics.html"><a href="shinyadvanced-interactive-graphics.html"><i class="fa fa-check"></i><b>12</b> Shiny–Advanced interactive graphics</a></li>
<li class="appendix"><span><b>Appendix</b></span><ul>
<li class="chapter" data-level="A.1" data-path="06-proportion.html"><a href="#data-sources"><i class="fa fa-check"></i><b>A.1</b> Data sources</a></li>
<li class="chapter" data-level="A.2" data-path="shinyadvanced-interactive-graphics.html"><a href="shinyadvanced-interactive-graphics.html#visualization-resources"><i class="fa fa-check"></i><b>A.2</b> Visualization resources</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Interactive data visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Proportion" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Proportion–Pie charts and pareto plots</h1>
<div class="figure">
<img src="images/Playfair_piecharts.jpg" alt="My picture" />
<p class="caption">My picture</p>
</div>
<p>From wikipedia: “The French engineer Charles Joseph Minard was one of the first to use pie charts in 1858, in particular in maps. Minard’s map, 1858 used pie charts to represent the cattle sent from all around France for consumption in Paris (1858).” <img src="images/Minard_pie.png" alt="My picture" /></p>
<p>Other examples of Minard’s work: <a href="https://cartographia.wordpress.com/category/charles-joseph-minard/" class="uri">https://cartographia.wordpress.com/category/charles-joseph-minard/</a></p>
<div id="pie-and-bar-chart" class="section level2">
<h2><span class="header-section-number">6.1</span> Pie and bar chart</h2>
<p>Good pie chart: Few elements, directly labled, alpha for pie pieces</p>
<p>Small multiple for pie vs stacked bar likert ratings or time trends</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(HistData)
<span class="kw">library</span>(tidyverse)

night.df =<span class="st"> </span>Nightingale <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key =</span> cause, <span class="dt">value =</span> deaths, Disease<span class="op">:</span>Other) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">intervention =</span> <span class="kw">ordered</span>( <span class="kw">rep</span>(<span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&#39;Before&#39;</span>, <span class="dv">12</span>), <span class="kw">rep</span>(<span class="st">&#39;After&#39;</span>, <span class="dv">12</span>)), <span class="dv">3</span>), <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&#39;Before&#39;</span>, <span class="st">&#39;After&#39;</span>))) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(intervention, Month, cause) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">deaths =</span> <span class="kw">sum</span>(deaths))

sum.night.df =<span class="st"> </span>night.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(cause) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">deaths =</span> <span class="kw">sum</span>(deaths))


<span class="co"># ## Statistic calculated internally</span>
<span class="co"># ggplot(night.df, aes(cause, deaths)) + </span>
<span class="co">#   geom_bar(stat=&quot;summary&quot;, fun.y = &quot;sum&quot;) </span>
<span class="co"># </span>
<span class="co"># ## Same plot but with seperately calculated summary</span>
<span class="co"># ggplot(sum.night.df) + </span>
<span class="co">#   geom_bar(aes(reorder(cause, -cause.percent), cause.percent), stat = &quot;identity&quot;) </span>
<span class="co"># </span>
<span class="co"># ## Horizontal bar</span>
<span class="co"># ggplot(sum.night.df) + </span>
<span class="co">#   geom_bar(aes(reorder(cause, -cause.percent), cause.percent), stat = &quot;identity&quot;) +</span>
<span class="co">#   coord_flip() </span>



pie.plot =<span class="st"> </span><span class="kw">ggplot</span>(sum.night.df, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(<span class="dv">1</span>), <span class="dt">y =</span> deaths, <span class="dt">fill =</span> cause)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width =</span> <span class="dv">1</span>,  <span class="dt">color=</span><span class="st">&quot;black&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">coord_polar</span>(<span class="dt">theta=</span><span class="st">&quot;y&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)

stacked.plot =<span class="st">  </span><span class="kw">ggplot</span>(sum.night.df, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(<span class="dv">1</span>), <span class="dt">y=</span>deaths, <span class="dt">fill =</span> cause))<span class="op">+</span>
<span class="st">   </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)
 
dodged.plot =<span class="st">  </span><span class="kw">ggplot</span>(sum.night.df, <span class="kw">aes</span>(<span class="dt">x =</span>cause, <span class="dt">y=</span>deaths, <span class="dt">fill =</span> cause))<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)

deaths.plot =<span class="st"> </span><span class="kw">ggarrange</span>(pie.plot, stacked.plot, dodged.plot, 
                       <span class="dt">nrow=</span><span class="dv">1</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">align =</span> <span class="st">&quot;hv&quot;</span>, <span class="dt">common.legend =</span> <span class="ot">TRUE</span>)

deaths.plot</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="pareto-plot-whole-part-and-and-ranking" class="section level2">
<h2><span class="header-section-number">6.2</span> Pareto plot: Whole part and and ranking</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Calculate percent and cumulative percent

sum.night.df =<span class="st"> </span>night.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">total.deaths =</span> <span class="kw">sum</span>(deaths)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(cause) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cause.percent =</span> <span class="dv">100</span><span class="op">*</span><span class="kw">sum</span>(deaths)<span class="op">/</span><span class="kw">max</span>(total.deaths)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>cause.percent) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cum.cause.percent =</span> <span class="kw">cumsum</span>(cause.percent)) 


## Pareto plot: Individual and cummulative proportion
<span class="kw">ggplot</span>(sum.night.df) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="kw">reorder</span>(cause, <span class="op">-</span>cause.percent), cause.percent), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="kw">reorder</span>(cause, <span class="op">-</span>cause.percent), cum.cause.percent), <span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">size =</span> <span class="dv">3</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="kw">reorder</span>(cause, <span class="op">-</span>cause.percent), cum.cause.percent, <span class="dt">group =</span> <span class="dv">1</span>), <span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> sum.night.df) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">80</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="kw">reorder</span>(cause, <span class="op">-</span>cause.percent), 
                  <span class="dt">ymin =</span> <span class="dv">0</span>, <span class="dt">ymax =</span> cum.cause.percent, <span class="dt">group =</span> <span class="dv">1</span>), <span class="dt">fill =</span> <span class="st">&quot;darkgrey&quot;</span>, <span class="dt">alpha =</span>.<span class="dv">8</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="kw">reorder</span>(cause, <span class="op">-</span>cause.percent), cause.percent), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">width =</span> .<span class="dv">8</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="kw">reorder</span>(cause, <span class="op">-</span>cause.percent), cum.cause.percent), <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-24-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ## Pareto plot</span>
<span class="co"># mtcars.df = mtcars</span>
<span class="co"># sum.mtcars.df = mtcars.df %&gt;% ungroup() %&gt;%</span>
<span class="co">#   mutate(total.n = n()) %&gt;% group_by(gear) %&gt;% </span>
<span class="co">#   summarise(gear.percent = 100*max(n())/max(total.n)) %&gt;% ungroup() %&gt;%</span>
<span class="co">#   arrange(-gear.percent) %&gt;% </span>
<span class="co">#   mutate(cum.gear.percent = cumsum(gear.percent)) </span>

<span class="co"># ggplot(data = sum.mtcars.df) + </span>
<span class="co">#   geom_hline(yintercept = 80) +</span>
<span class="co">#   geom_ribbon(aes(reorder(gear, -gear.percent), </span>
<span class="co">#                   ymin = 0, ymax = cum.gear.percent, group = 1), fill = &quot;darkgrey&quot;, alpha =.8) +</span>
<span class="co">#   geom_bar(aes(reorder(gear, -gear.percent), gear.percent), stat = &quot;identity&quot;, width = .8) +</span>
<span class="co">#   geom_point(aes(reorder(gear, -gear.percent), cum.gear.percent), size = 3, colour = &quot;red&quot;)</span></code></pre></div>
</div>
<div id="stacked-bar-chart" class="section level2">
<h2><span class="header-section-number">6.3</span> Stacked bar chart</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sum.night.df =<span class="st"> </span>night.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">total.deaths =</span> <span class="kw">sum</span>(deaths)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(cause, intervention) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">cause.percent =</span> <span class="dv">100</span><span class="op">*</span><span class="kw">sum</span>(deaths)<span class="op">/</span><span class="kw">max</span>(total.deaths),
            <span class="dt">deaths =</span> <span class="kw">sum</span>(deaths))

## Stacked bar with count: Shows data directly
<span class="kw">ggplot</span>(sum.night.df, <span class="kw">aes</span>(intervention, deaths, <span class="dt">fill =</span> cause)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;stack&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Stacked bar with proportion: Abstracts to proportion
<span class="kw">ggplot</span>(sum.night.df, <span class="kw">aes</span>(intervention, cause.percent, <span class="dt">fill =</span> cause))<span class="op">+</span>
<span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-25-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(sum.night.df, <span class="kw">aes</span>(intervention, cause.percent, <span class="dt">fill =</span> cause))<span class="op">+</span>
<span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)<span class="op">+</span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-25-3.png" width="672" /></p>
</div>
<div id="faceted-bar-chart-with-overall-reference-distribution" class="section level2">
<h2><span class="header-section-number">6.4</span> Faceted Bar chart with overall reference distribution</h2>
<p>The grey bars in the background represent the overall distribution and provide a referende for each of the marginal distributions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diamonds.df =<span class="st"> </span>diamonds

count.diamonds.df =<span class="st"> </span>diamonds.df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(cut, color) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">count =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(color) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">color.count =</span> <span class="kw">sum</span>(count))

<span class="kw">ggplot</span>(count.diamonds.df, <span class="kw">aes</span>(color, count)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(color, color.count), <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">alpha =</span>.<span class="dv">33</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">alpha =</span> .<span class="dv">8</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(cut<span class="op">~</span>.)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/Reference-bar-1.png" width="672" /></p>
</div>
<div id="rose-or-coxcomb-plots" class="section level2">
<h2><span class="header-section-number">6.5</span> Rose or Coxcomb plots</h2>
<p>Nightingale produced a graph “Diagram of the Causes of Mortality in the Army in the East” that showed that most soldiers during the Crimean war died of disease rather than wounds. Improving hygiene in March of 1855 led to fewer disease related deaths.</p>
<p>This “Diagram of the causes of mortality in the army in the East” was published in Notes on Matters Affecting the Health, Efficiency, and Hospital Administration of the British Army and sent to Queen Victoria in 1858. <img src="images/Nightingale-mortality.jpg" alt="My picture" /></p>
<p>Coxcombe plot diminishes small values and requires square root transform</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(night.df, <span class="kw">aes</span>(<span class="dt">x =</span> Month, <span class="dt">y =</span> deaths, <span class="dt">fill =</span> cause)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">width =</span> <span class="dv">1</span>, <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">color=</span><span class="st">&quot;black&quot;</span>, <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_y_log10</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">coord_polar</span>(<span class="dt">start=</span><span class="dv">3</span><span class="op">*</span>pi<span class="op">/</span><span class="dv">2</span>)  <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(.<span class="op">~</span>intervention)  <span class="op">+</span>
<span class="st">  </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<pre><code>## Warning: Transformation introduced infinite values in
## continuous y-axis</code></pre>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(night.df, <span class="kw">aes</span>(Month, deaths, <span class="dt">fill =</span> cause)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_grid</span>(intervention<span class="op">~</span>.) <span class="op">+</span>
<span class="st">   </span><span class="kw">fill_palette</span>(<span class="dt">palette =</span> <span class="st">&quot;grey&quot;</span>) <span class="op">+</span>
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;&quot;</span>)<span class="op">+</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-26-2.png" width="672" /></p>
</div>
<div id="stacked-dodged-and-opposed-bar-chart" class="section level2">
<h2><span class="header-section-number">6.6</span> Stacked, dodged and opposed bar chart</h2>
<p>Comparison of many categories</p>
<ul>
<li><p>Stacked makes grouping easy</p></li>
<li><p>Dodge makes comparison easy with common axis and relative judgment</p></li>
<li><p>Opposing makes gender more apparent</p></li>
</ul>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
</div>
<div id="treemaps-for-whole-part-of-hierarchy" class="section level2">
<h2><span class="header-section-number">6.7</span> Treemaps for whole-part of hierarchy</h2>
<p>Schneiderman</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(treemapify)

<span class="kw">ggplot</span>(G20, ggplot2<span class="op">::</span><span class="kw">aes</span>(<span class="dt">area =</span> gdp_mil_usd, <span class="dt">fill =</span> hdi, <span class="dt">label =</span> country, <span class="dt">subgroup =</span> region)) <span class="op">+</span>
<span class="st">  </span>treemapify<span class="op">::</span><span class="kw">geom_treemap</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_treemap_subgroup_border</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_treemap_subgroup_text</span>(<span class="dt">place =</span> <span class="st">&quot;centre&quot;</span>, <span class="dt">grow =</span> T, <span class="dt">alpha =</span> <span class="fl">0.5</span>, <span class="dt">colour =</span>
                             <span class="st">&quot;black&quot;</span>, <span class="dt">fontface =</span> <span class="st">&quot;italic&quot;</span>, <span class="dt">min.size =</span> <span class="dv">0</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_treemap_text</span>(<span class="dt">colour =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">place =</span> <span class="st">&quot;topleft&quot;</span>, <span class="dt">reflow =</span> T)</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
<div id="circle-packing" class="section level2">
<h2><span class="header-section-number">6.8</span> Circle packing</h2>
<p>The most valuable graphical dimensions of x and y position are wasted in this plot becaue they have no meaning, but it can be engaging</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(packcircles)
<span class="kw">library</span>(viridis)
<span class="kw">library</span>(tidyverse)

<span class="co"># Show with radius vs area </span>
packing &lt;-<span class="st"> </span><span class="kw">circleProgressiveLayout</span>(G20<span class="op">$</span>gdp_mil_usd, <span class="dt">sizetype=</span><span class="st">&#39;area&#39;</span>)
G20.df =<span class="st"> </span><span class="kw">cbind</span>(G20, packing)
layout =<span class="st"> </span>G20.df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(country, x, y, radius)

dat.pack &lt;-<span class="st"> </span><span class="kw">circleLayoutVertices</span>(layout, <span class="dt">npoints=</span><span class="dv">60</span>, <span class="dt">idcol =</span> <span class="dv">1</span>, <span class="dt">xysizecols=</span><span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">sizetype =</span> <span class="st">&quot;radius&quot;</span>)

dat.pack =<span class="st"> </span><span class="kw">left_join</span>(dat.pack, G20.df, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;id&quot;</span> =<span class="st"> &quot;country&quot;</span>))
 
<span class="kw">ggplot</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> dat.pack, <span class="kw">aes</span>(x.x, y.x, <span class="dt">group =</span> id, <span class="dt">fill=</span><span class="kw">as.factor</span>(gdp_mil_usd)), <span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.6</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> G20.df, <span class="kw">aes</span>(x, y, <span class="dt">size=</span>gdp_mil_usd, <span class="dt">label =</span> country)) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> <span class="kw">magma</span>(<span class="kw">nrow</span>(G20.df))) <span class="op">+</span>
<span class="st">  </span><span class="kw">scale_size_continuous</span>(<span class="dt">range =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;none&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_equal</span>()</code></pre></div>
<p><img src="visualizationwithggplot_files/figure-html/circle-pack-1.png" width="672" /></p>


</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Comparison.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Fluctuation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jdlee/interactive-data-visualization/blob/master/06-proportion.Rmd",
"text": "Edit"
},
"download": ["visualizationwithggplot.pdf", "visualizationwithggplot.epub"],
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
